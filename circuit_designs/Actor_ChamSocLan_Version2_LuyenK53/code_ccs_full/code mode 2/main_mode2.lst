CCS PCH C Compiler, Version 4.120, 5967               29-Apr-13 01:29

               Filename: C:\Users\Tuan\Desktop\Actor\code_ccs_full\code mode 2\main_mode2.lst

               ROM used: 9768 bytes (15%)
                         Largest free fragment is 55764
               RAM used: 83 (2%) at main() level
                         112 (3%) worst case
               Stack:    13 worst case (9 in main + 4 for interrupts)

*
00000:  GOTO   256C
*
00008:  MOVWF  04
0000A:  MOVFF  FD8,05
0000E:  MOVFF  FE0,06
00012:  MOVLB  0
00014:  MOVFF  FE9,0C
00018:  MOVFF  FEA,07
0001C:  MOVFF  FE1,08
00020:  MOVFF  FE2,09
00024:  MOVFF  FD9,0A
00028:  MOVFF  FDA,0B
0002C:  MOVFF  FF3,12
00030:  MOVFF  FF4,13
00034:  MOVFF  FFA,14
00038:  MOVFF  FF5,15
0003C:  MOVFF  FF6,16
00040:  MOVFF  FF7,17
00044:  MOVFF  00,0E
00048:  MOVFF  01,0F
0004C:  MOVFF  02,10
00050:  MOVFF  03,11
00054:  BTFSS  FF2.5
00056:  GOTO   0060
0005A:  BTFSC  FF2.2
0005C:  GOTO   0560
00060:  BTFSS  F9D.0
00062:  GOTO   006C
00066:  BTFSC  F9E.0
00068:  GOTO   02E2
0006C:  BTFSS  F9D.5
0006E:  GOTO   0078
00072:  BTFSC  F9E.5
00074:  GOTO   07C2
00078:  MOVFF  0E,00
0007C:  MOVFF  0F,01
00080:  MOVFF  10,02
00084:  MOVFF  11,03
00088:  MOVFF  0C,FE9
0008C:  MOVFF  07,FEA
00090:  BSF    07.7
00092:  MOVFF  08,FE1
00096:  MOVFF  09,FE2
0009A:  MOVFF  0A,FD9
0009E:  MOVFF  0B,FDA
000A2:  MOVFF  12,FF3
000A6:  MOVFF  13,FF4
000AA:  MOVFF  14,FFA
000AE:  MOVFF  15,FF5
000B2:  MOVFF  16,FF6
000B6:  MOVFF  17,FF7
000BA:  MOVF   04,W
000BC:  MOVFF  06,FE0
000C0:  MOVFF  05,FD8
000C4:  RETFIE 0
.................... #include <main_mode2.h> 
.................... #include <18F46K20.h> 
.................... //////// Standard Header file for the PIC18F46K20 device //////////////// 
.................... #device PIC18F46K20 
.................... #list 
....................  
.................... #device adc=16 
....................  
.................... #FUSES NOWDT                    //No Watch Dog Timer 
.................... #FUSES WDT128                   //Watch Dog Timer uses 1:128 Postscale 
.................... #FUSES HS                       //Low power osc < 200 khz 
.................... #FUSES NOBROWNOUT               //No brownout reset 
.................... #FUSES NOLVP                    //No low voltage prgming, B3(PIC16) or B5(PIC18) used for I/O 
.................... #FUSES NOXINST                  //Extended set extension and Indexed Addressing mode disabled (Legacy mode) 
....................  
.................... #use delay(clock=4000000) 
*
00860:  CLRF   FEA
00862:  MOVLW  5C
00864:  MOVWF  FE9
00866:  MOVF   FEF,W
00868:  BZ    0886
0086A:  MOVLW  01
0086C:  MOVWF  01
0086E:  CLRF   00
00870:  DECFSZ 00,F
00872:  BRA    0870
00874:  DECFSZ 01,F
00876:  BRA    086E
00878:  MOVLW  4A
0087A:  MOVWF  00
0087C:  DECFSZ 00,F
0087E:  BRA    087C
00880:  BRA    0882
00882:  DECFSZ FEF,F
00884:  BRA    086A
00886:  RETURN 0
.................... #locate TRISA =   0x0F92 
.................... #locate TRISB =   0x0F93 
.................... #locate TRISC =   0x0F94 
.................... #locate TRISD =   0x0F95 
.................... #locate TRISE =   0x0F96 
.................... #locate LATA  =   0x0F89 
.................... #locate LATB  =   0x0F8A 
.................... #locate LATC  =   0x0F8B 
.................... #locate LATD  =   0x0F8C 
.................... #locate LATE  =   0x0F8D 
.................... #locate PORTA =   0x0F80 
.................... #locate PORTB =   0x0F81 
.................... #locate PORTC =   0x0F82 
.................... #locate PORTD =   0x0F83 
.................... #locate PORTE =   0x0F84 
.................... #locate TXSTA =   0x0FAC 
.................... #locate TXREG =   0x0FAD 
.................... #locate RCREG =   0x0FAE 
.................... // khai bao cac nut bam 
.................... #bit TRMT  =   TXSTA.1 
.................... #bit SET_BTN  =   PORTB.0 
.................... #bit UP_BTN   =   PORTB.2 
.................... #bit DOWN_BTN =   PORTB.1 
.................... #bit MENU_BTN =   PORTB.3 
.................... //Nut an chon che do manual-auto 
.................... //auto :  tu dong dieu khien bom theo 
.................... //manual: do nguoi dung tu setup va dieu khien.  
.................... #bit  Speaker  = LATC.0             //  
.................... #bit  Speaker_io  = TRISC.0         //  
.................... #bit  LED_LCD  = LATA.4             //  
.................... #bit  LED_LCD_IO  = TRISA.4         //  
.................... //define cac van dien tu 
.................... #bit     VAN1    =  LATC.5       // dieu khien relay1 
.................... #bit     VAN2    =  LATC.2       // dieu khien relay2 
.................... #bit     VAN3    =  LATD.4       // dieu khien relay3 
.................... #bit     VAN4    =  LATD.5       // dieu khien relay4 
.................... #bit     VAN5    =  LATD.6       // dieu khien relay5 
.................... #bit     VAN6    =  LATD.7       // dieu khien relay6 
.................... #bit     MAYBOM  =  LATD.3       // dieu khien may bom 
.................... #bit     VAN1_IO    =  TRISC.5 
.................... #bit     VAN2_IO    =  TRISC.2 
.................... #bit     VAN3_IO    =  TRISD.4 
.................... #bit     VAN4_IO    =  TRISD.5 
.................... #bit     VAN5_IO    =  TRISD.6 
.................... #bit     VAN6_IO    =  TRISD.7 
.................... #bit     MAYBOM_IO  =  TRISD.3   
....................  
....................  
....................  
....................  
.................... #use rs232(UART,baud=19200,xmit=PIN_C6,rcv=PIN_C7,parity=N,bits=8) 
....................  
.................... unsigned char rx_data; 
.................... void uart_putchar(unsigned char udata) 
.................... { 
....................   while(!TRMT); 
*
00586:  BTFSS  FAC.1
00588:  BRA    0586
....................   TXREG = udata; 
0058A:  MOVFF  6B,FAD
.................... } 
0058E:  RETURN 0
....................  
.................... #include "ds1307.c" 
.................... #define DS1307_SDA  PIN_C4 
.................... #define DS1307_SCL  PIN_C3 
.................... #use i2c(master, sda=DS1307_SDA, scl=DS1307_SCL) 
*
002E8:  MOVLW  08
002EA:  MOVWF  01
002EC:  NOP   
002EE:  BCF    F8B.3
002F0:  BCF    F94.3
002F2:  NOP   
002F4:  RLCF   x67,F
002F6:  BCF    F8B.4
002F8:  BTFSC  FD8.0
002FA:  BSF    F94.4
002FC:  BTFSS  FD8.0
002FE:  BCF    F94.4
00300:  BSF    F94.3
00302:  BTFSS  F82.3
00304:  BRA    0302
00306:  DECFSZ 01,F
00308:  BRA    02EC
0030A:  NOP   
0030C:  BCF    F8B.3
0030E:  BCF    F94.3
00310:  NOP   
00312:  BSF    F94.4
00314:  NOP   
00316:  NOP   
00318:  BSF    F94.3
0031A:  BTFSS  F82.3
0031C:  BRA    031A
0031E:  CLRF   01
00320:  NOP   
00322:  BTFSC  F82.4
00324:  BSF    01.0
00326:  BCF    F8B.3
00328:  BCF    F94.3
0032A:  BCF    F8B.4
0032C:  BCF    F94.4
0032E:  RETURN 0
00330:  MOVLW  08
00332:  MOVWF  x68
00334:  MOVFF  00,69
00338:  BSF    F94.4
0033A:  NOP   
0033C:  BSF    F94.3
0033E:  BTFSS  F82.3
00340:  BRA    033E
00342:  BTFSC  F82.4
00344:  BSF    FD8.0
00346:  BTFSS  F82.4
00348:  BCF    FD8.0
0034A:  RLCF   01,F
0034C:  NOP   
0034E:  BCF    F94.3
00350:  BCF    F8B.3
00352:  DECFSZ x68,F
00354:  BRA    0338
00356:  BSF    F94.4
00358:  NOP   
0035A:  BCF    F8B.4
0035C:  MOVF   x69,W
0035E:  BTFSS  FD8.2
00360:  BCF    F94.4
00362:  NOP   
00364:  BSF    F94.3
00366:  BTFSS  F82.3
00368:  BRA    0366
0036A:  NOP   
0036C:  BCF    F8B.3
0036E:  BCF    F94.3
00370:  NOP   
00372:  BCF    F8B.4
00374:  BCF    F94.4
00376:  RETURN 0
....................  
.................... //int i; 
.................... /*---------------------- Chuy?n du li?u m? BIN cua MASTER -> du li?u m? BCD cho DS1307------------------ 
.................... int write(int data)                  // MASTER -> DS1307. 
....................    {                                 //      x -> y. 
....................       int x,y;                       //vd:   7 -> 7  = 0x07. 
....................       x = data;                      //vd:  12 -> 18 = 0x12. 
....................       if(x<10) 
....................          { 
....................             y = x; 
....................          } 
....................       else if(x>=10) 
....................          { 
....................             y = (x/10 * 6) + x;            //vd:  29 -> 41 = 0x29. 
....................          } 
....................       return(y);                     //vd:  35 -> 53 = 0x35. 
....................    } 
....................     
....................     
.................... /*---------------------- Chuy?n du li?u m? BCD cua DS1307 -> du li?u m? BIN cho MASTER------------------ 
.................... int read(int data) 
....................    {                                 // MASTER <- DS1307. 
....................       int x,y,z;                     //      x <- y. 
....................       y = data;                      //vd:   5 <-  5 = 0x05. 
....................       i=0;                           //vd:  10 <- 16 = 0x10. 
....................       if(y<10)                       //vd:  20 <- 32 = 0x20. 
....................          {                           //vd:  30 <- 48 = 0x30. 
....................             x = y;                   //vd:  40 <- 64 = 0x40. 
....................             z = x;                   //vd:  50 <- 80 = 0x50. 
....................          }                           //.....  
....................       else if(y>=10) 
....................          { 
....................             do { 
....................                   x = y - (6 * i);         
....................                   z = (x/10 * 6) + x; 
....................                   i++; 
....................                } 
....................            while(z!=y); 
....................          } 
....................       return(x);     
....................    } 
....................  
....................  
....................  
....................  
....................  
.................... /* 
.................... // Convert normal decimal numbers to binary coded decimal 
.................... int8 decToBcd(int8 val) 
.................... { 
....................   return ( (val/10*16) + (val%10) ); 
.................... } 
....................  
.................... // Convert binary coded decimal to normal decimal numbers 
.................... int8 bcdToDec(int8 val) 
.................... { 
....................   return ( (val/16*10) + (val%16) ); 
.................... } 
.................... */ 
....................  
.................... BYTE bin2bcd(BYTE binary_value)  
.................... {  
*
0109C:  CLRF   19
0109E:  BTFSC  FF2.7
010A0:  BSF    19.7
010A2:  BCF    FF2.7
....................   return(((binary_value/10*16)+(binary_value%10)));  
010A4:  MOVFF  53,67
010A8:  MOVLW  0A
010AA:  MOVWF  x68
010AC:  CALL   047E
010B0:  BTFSC  19.7
010B2:  BSF    FF2.7
010B4:  MOVF   01,W
010B6:  MULLW  10
010B8:  MOVFF  FF3,54
010BC:  CLRF   19
010BE:  BTFSC  FF2.7
010C0:  BSF    19.7
010C2:  BCF    FF2.7
010C4:  MOVFF  53,67
010C8:  MOVLW  0A
010CA:  MOVWF  x68
010CC:  CALL   047E
010D0:  BTFSC  19.7
010D2:  BSF    FF2.7
010D4:  MOVF   00,W
010D6:  ADDWF  54,W
010D8:  MOVWF  01
.................... }  
010DA:  RETURN 0
....................  
....................  
.................... // Input range - 00 to 99.  
.................... BYTE bcd2bin(BYTE bcd_value)  
.................... {  
....................   return((bcd_value/16*10)+(bcd_value%16));  
*
003D8:  SWAPF  x66,W
003DA:  MOVWF  00
003DC:  MOVLW  0F
003DE:  ANDWF  00,F
003E0:  MOVF   00,W
003E2:  MULLW  0A
003E4:  MOVFF  FF3,67
003E8:  MOVF   x66,W
003EA:  ANDLW  0F
003EC:  ADDWF  x67,W
003EE:  MOVWF  01
.................... }  
003F0:  RETURN 0
....................  
.................... //========================== 
.................... // initial DS1307 
.................... //========================== 
.................... void init_DS1307() 
.................... { 
....................    output_float(DS1307_SCL); 
*
009B2:  BSF    F94.3
....................    output_float(DS1307_SDA); 
009B4:  BSF    F94.4
.................... } 
009B6:  GOTO   2600 (RETURN)
.................... //========================== 
.................... // write data one byte to 
.................... // DS1307 
.................... //========================== 
.................... void write_DS1307(byte address, BYTE data) 
.................... { 
....................    short int status; 
....................    i2c_start(); 
*
010DC:  BSF    F94.4
010DE:  NOP   
010E0:  BSF    F94.3
010E2:  NOP   
010E4:  BCF    F8B.4
010E6:  BCF    F94.4
010E8:  NOP   
010EA:  BCF    F8B.3
010EC:  BCF    F94.3
010EE:  CLRF   19
010F0:  BTFSC  FF2.7
010F2:  BSF    19.7
010F4:  BCF    FF2.7
....................    i2c_write(0xd0); 
010F6:  MOVLW  D0
010F8:  MOVWF  x67
010FA:  CALL   02E8
010FE:  BTFSC  19.7
01100:  BSF    FF2.7
01102:  CLRF   19
01104:  BTFSC  FF2.7
01106:  BSF    19.7
01108:  BCF    FF2.7
....................    i2c_write(address); 
0110A:  MOVFF  54,67
0110E:  CALL   02E8
01112:  BTFSC  19.7
01114:  BSF    FF2.7
01116:  CLRF   19
01118:  BTFSC  FF2.7
0111A:  BSF    19.7
0111C:  BCF    FF2.7
....................    i2c_write(data); 
0111E:  MOVFF  55,67
01122:  CALL   02E8
01126:  BTFSC  19.7
01128:  BSF    FF2.7
....................    i2c_stop(); 
0112A:  BCF    F94.4
0112C:  NOP   
0112E:  BSF    F94.3
01130:  BTFSS  F82.3
01132:  BRA    1130
01134:  NOP   
01136:  BRA    1138
01138:  NOP   
0113A:  BSF    F94.4
0113C:  NOP   
....................    i2c_start(); 
0113E:  BSF    F94.4
01140:  NOP   
01142:  BSF    F94.3
01144:  NOP   
01146:  BCF    F8B.4
01148:  BCF    F94.4
0114A:  NOP   
0114C:  BCF    F8B.3
0114E:  BCF    F94.3
01150:  CLRF   19
01152:  BTFSC  FF2.7
01154:  BSF    19.7
01156:  BCF    FF2.7
....................    status=i2c_write(0xd0); 
01158:  MOVLW  D0
0115A:  MOVWF  x67
0115C:  CALL   02E8
01160:  BTFSC  19.7
01162:  BSF    FF2.7
01164:  MOVF   01,W
01166:  BCF    56.0
01168:  BTFSC  01.0
0116A:  BSF    56.0
....................    while(status==1) 
....................    { 
0116C:  BTFSS  56.0
0116E:  BRA    11A4
....................       i2c_start(); 
01170:  BSF    F94.4
01172:  NOP   
01174:  BSF    F94.3
01176:  NOP   
01178:  BTFSS  F82.3
0117A:  BRA    1178
0117C:  BCF    F8B.4
0117E:  BCF    F94.4
01180:  NOP   
01182:  BCF    F8B.3
01184:  BCF    F94.3
01186:  CLRF   19
01188:  BTFSC  FF2.7
0118A:  BSF    19.7
0118C:  BCF    FF2.7
....................       status=i2c_write(0xd0); 
0118E:  MOVLW  D0
01190:  MOVWF  x67
01192:  CALL   02E8
01196:  BTFSC  19.7
01198:  BSF    FF2.7
0119A:  MOVF   01,W
0119C:  BCF    56.0
0119E:  BTFSC  01.0
011A0:  BSF    56.0
....................    } 
011A2:  BRA    116C
.................... } 
011A4:  RETURN 0
.................... //========================== 
.................... // read data one byte from DS1307 
.................... //========================== 
.................... BYTE read_DS1307(byte address) 
.................... { 
....................    BYTE data; 
....................    i2c_start(); 
*
00378:  BSF    F94.4
0037A:  NOP   
0037C:  BSF    F94.3
0037E:  NOP   
00380:  BTFSS  F82.3
00382:  BRA    0380
00384:  BCF    F8B.4
00386:  BCF    F94.4
00388:  NOP   
0038A:  BCF    F8B.3
0038C:  BCF    F94.3
....................    i2c_write(0xd0); 
0038E:  MOVLW  D0
00390:  MOVWF  x67
00392:  RCALL  02E8
....................    i2c_write(address); 
00394:  MOVFF  65,67
00398:  RCALL  02E8
....................    i2c_start(); 
0039A:  BSF    F94.4
0039C:  NOP   
0039E:  BSF    F94.3
003A0:  NOP   
003A2:  BTFSS  F82.3
003A4:  BRA    03A2
003A6:  BCF    F8B.4
003A8:  BCF    F94.4
003AA:  NOP   
003AC:  BCF    F8B.3
003AE:  BCF    F94.3
....................    i2c_write(0xd1); 
003B0:  MOVLW  D1
003B2:  MOVWF  x67
003B4:  RCALL  02E8
....................    data=i2c_read(0); 
003B6:  CLRF   00
003B8:  RCALL  0330
003BA:  MOVFF  01,66
....................    i2c_stop(); 
003BE:  BCF    F94.4
003C0:  NOP   
003C2:  BSF    F94.3
003C4:  BTFSS  F82.3
003C6:  BRA    03C4
003C8:  NOP   
003CA:  BRA    03CC
003CC:  NOP   
003CE:  BSF    F94.4
003D0:  NOP   
....................    return(data); 
003D2:  MOVFF  66,01
.................... } 
003D6:  RETURN 0
....................  
.................... // 1) Sets the date and time on the ds1307 
.................... // 2) Starts the clock 
.................... // 3) Sets hour mode to 24 hour clock 
.................... // Assumes you're passing in valid numbers 
.................... /* 
.................... void setDateDs1307(int8 second,        // 0-59 
....................                    int8 minute,        // 0-59 
....................                    int8 hour,          // 1-23 
....................                    int8 day,           // 1-7 
....................                    int8 date,          // 1-28/29/30/31 
....................                    int8 month,         // 1-12 
....................                    int8 year,          // 0-99 
....................                    int8 control) 
....................                     
.................... { 
....................    write_DS1307(0x0, decToBcd(second));    // 0 to bit 7 starts the clock 
....................    write_DS1307(0x1, decToBcd(minute)); 
....................    write_DS1307(0x2, decToBcd(hour));      // If you want 12 hour am/pm you need to set 
....................                                    // bit 6 (also need to change readDateDs1307) 
....................    write_DS1307(0x3, decToBcd(day)); 
....................    write_DS1307(0x4, decToBcd(date)); 
....................    write_DS1307(0x5, decToBcd(month)); 
....................    write_DS1307(0x6, decToBcd(year)); 
....................    write_DS1307(0x7, decToBcd(control)); 
....................  
.................... } 
.................... */ 
.................... void setDateDs1307(int8 second,        // 0-59 
....................                    int8 minute,        // 0-59 
....................                    int8 hour,          // 1-23 
....................                    int8 day,           // 1-7 
....................                    int8 date,          // 1-28/29/30/31 
....................                    int8 month,         // 1-12 
....................                    int8 year)          // 0-99 
....................                     
....................                     
.................... { 
....................    write_DS1307(0x0, bin2bcd(second));    // 0 to bit 7 starts the clock 
....................    write_DS1307(0x1, bin2bcd(minute)); 
....................    write_DS1307(0x2, bin2bcd(hour));      // If you want 12 hour am/pm you need to set 
....................                                         // bit 6 (also need to change readDateDs1307) 
....................    write_DS1307(0x3, bin2bcd(day)); 
....................    write_DS1307(0x4, bin2bcd(date)); 
....................    write_DS1307(0x5, bin2bcd(month)); 
....................    write_DS1307(0x6, bin2bcd(year)); 
.................... } 
....................  
....................  
....................  
.................... #include "AT24LC01.c" 
.................... /////////////////////////////////////////////////////////////////////////// 
.................... ////   Library for a 24C128 serial EEPROM                              //// 
.................... ////                                                                   //// 
.................... ////   init_ext_eeprom();    Call before the other functions are used  //// 
.................... ////                                                                   //// 
.................... ////   write_ext_eeprom(a, d);  Write the byte d to the address a      //// 
.................... ////                                                                   //// 
.................... ////   d = read_ext_eeprom(a);   Read the byte d from the address a    //// 
.................... ////                                                                   //// 
.................... ////   The main program may define eeprom_sda                          //// 
.................... ////   and eeprom_scl to override the defaults below.                  //// 
.................... ////                                                                   //// 
.................... /////////////////////////////////////////////////////////////////////////// 
.................... ////        (C) Copyright 1996,2003 Custom Computer Services           //// 
.................... //// This source code may only be used by licensed users of the CCS C  //// 
.................... //// compiler.  This source code may only be distributed to other      //// 
.................... //// licensed users of the CCS C compiler.  No other use, reproduction //// 
.................... //// or distribution is permitted without written permission.          //// 
.................... //// Derivative programs created using this software in object code    //// 
.................... //// form are not restricted in any way.                               //// 
.................... /////////////////////////////////////////////////////////////////////////// 
....................  
.................... #ifndef EEPROM_SDA 
....................  
.................... #define EEPROM_SDA  PIN_C4 
.................... #define EEPROM_SCL  PIN_C3 
....................  
.................... #endif 
....................  
.................... #define hi(x)  (*((int8 *)&x+1)) 
....................  
.................... #use i2c(master, sda=EEPROM_SDA, scl=EEPROM_SCL) 
*
009BA:  MOVLW  08
009BC:  MOVWF  01
009BE:  NOP   
009C0:  BCF    F8B.3
009C2:  BCF    F94.3
009C4:  NOP   
009C6:  RLCF   5D,F
009C8:  BCF    F8B.4
009CA:  BTFSC  FD8.0
009CC:  BSF    F94.4
009CE:  BTFSS  FD8.0
009D0:  BCF    F94.4
009D2:  BSF    F94.3
009D4:  BTFSS  F82.3
009D6:  BRA    09D4
009D8:  DECFSZ 01,F
009DA:  BRA    09BE
009DC:  NOP   
009DE:  BCF    F8B.3
009E0:  BCF    F94.3
009E2:  NOP   
009E4:  BSF    F94.4
009E6:  NOP   
009E8:  NOP   
009EA:  BSF    F94.3
009EC:  BTFSS  F82.3
009EE:  BRA    09EC
009F0:  CLRF   01
009F2:  NOP   
009F4:  BTFSC  F82.4
009F6:  BSF    01.0
009F8:  BCF    F8B.3
009FA:  BCF    F94.3
009FC:  BCF    F8B.4
009FE:  BCF    F94.4
00A00:  RETURN 0
*
00A70:  MOVLW  08
00A72:  MOVWF  5D
00A74:  MOVFF  00,5E
00A78:  BSF    F94.4
00A7A:  NOP   
00A7C:  BSF    F94.3
00A7E:  BTFSS  F82.3
00A80:  BRA    0A7E
00A82:  BTFSC  F82.4
00A84:  BSF    FD8.0
00A86:  BTFSS  F82.4
00A88:  BCF    FD8.0
00A8A:  RLCF   01,F
00A8C:  NOP   
00A8E:  BCF    F94.3
00A90:  BCF    F8B.3
00A92:  DECFSZ 5D,F
00A94:  BRA    0A78
00A96:  BSF    F94.4
00A98:  NOP   
00A9A:  BCF    F8B.4
00A9C:  MOVF   5E,W
00A9E:  BTFSS  FD8.2
00AA0:  BCF    F94.4
00AA2:  NOP   
00AA4:  BSF    F94.3
00AA6:  BTFSS  F82.3
00AA8:  BRA    0AA6
00AAA:  NOP   
00AAC:  BCF    F8B.3
00AAE:  BCF    F94.3
00AB0:  NOP   
00AB2:  BCF    F8B.4
00AB4:  BCF    F94.4
00AB6:  GOTO   0B68 (RETURN)
....................  
.................... #define EEPROM_ADDRESS long int 
.................... #define EEPROM_SIZE   16384 
....................  
.................... void init_ext_eeprom() 
.................... { 
....................     int i; 
....................  
....................    output_float(EEPROM_SCL); 
*
00A02:  BSF    F94.3
....................    output_float(EEPROM_SDA); 
00A04:  BSF    F94.4
....................    delay_us(4); 
00A06:  BRA    0A08
00A08:  BRA    0A0A
....................    for (i=0;i<3;i++) { 
00A0A:  CLRF   53
00A0C:  MOVF   53,W
00A0E:  SUBLW  02
00A10:  BNC   0A62
....................      i2c_start(); 
00A12:  BSF    F94.4
00A14:  NOP   
00A16:  BSF    F94.3
00A18:  NOP   
00A1A:  BCF    F8B.4
00A1C:  BCF    F94.4
00A1E:  NOP   
00A20:  BCF    F8B.3
00A22:  BCF    F94.3
....................      i2c_write(0xa0); 
00A24:  MOVLW  A0
00A26:  MOVWF  5D
00A28:  RCALL  09BA
....................      i2c_write(0xff); 
00A2A:  SETF   5D
00A2C:  RCALL  09BA
....................      i2c_write(0xff); 
00A2E:  SETF   5D
00A30:  RCALL  09BA
....................      if(i==2) 
00A32:  MOVF   53,W
00A34:  SUBLW  02
00A36:  BNZ   0A40
....................        i2c_write(0x2); 
00A38:  MOVLW  02
00A3A:  MOVWF  5D
00A3C:  RCALL  09BA
....................      else 
00A3E:  BRA    0A4A
....................        i2c_write(0x2+i); 
00A40:  MOVLW  02
00A42:  ADDWF  53,W
00A44:  MOVWF  54
00A46:  MOVWF  5D
00A48:  RCALL  09BA
....................      i2c_stop(); 
00A4A:  BCF    F94.4
00A4C:  NOP   
00A4E:  BSF    F94.3
00A50:  BTFSS  F82.3
00A52:  BRA    0A50
00A54:  NOP   
00A56:  BRA    0A58
00A58:  NOP   
00A5A:  BSF    F94.4
00A5C:  NOP   
....................   } 
00A5E:  INCF   53,F
00A60:  BRA    0A0C
.................... } 
00A62:  GOTO   260C (RETURN)
....................  
....................  
.................... void write_ext_eeprom(long int address, BYTE data) 
.................... { 
....................    i2c_start(); 
*
01764:  BSF    F94.4
01766:  NOP   
01768:  BSF    F94.3
0176A:  NOP   
0176C:  BCF    F8B.4
0176E:  BCF    F94.4
01770:  NOP   
01772:  BCF    F8B.3
01774:  BCF    F94.3
....................    i2c_write(((0xa0)|(hi(address)>>5))&0xfe); 
01776:  CLRF   5B
01778:  MOVLW  57
0177A:  MOVWF  5A
0177C:  MOVLW  01
0177E:  ADDWF  5A,W
01780:  MOVWF  01
01782:  MOVLW  00
01784:  ADDWFC 5B,W
01786:  MOVWF  03
01788:  MOVFF  01,FE9
0178C:  MOVWF  FEA
0178E:  SWAPF  FEF,W
01790:  MOVWF  00
01792:  RRCF   00,F
01794:  MOVLW  07
01796:  ANDWF  00,F
01798:  MOVF   00,W
0179A:  IORLW  A0
0179C:  ANDLW  FE
0179E:  MOVWF  5A
017A0:  MOVWF  5D
017A2:  CALL   09BA
....................    i2c_write(hi(address)&0x3f); 
017A6:  CLRF   5B
017A8:  MOVLW  57
017AA:  MOVWF  5A
017AC:  MOVLW  01
017AE:  ADDWF  5A,W
017B0:  MOVWF  01
017B2:  MOVLW  00
017B4:  ADDWFC 5B,W
017B6:  MOVWF  03
017B8:  MOVFF  01,FE9
017BC:  MOVWF  FEA
017BE:  MOVF   FEF,W
017C0:  ANDLW  3F
017C2:  MOVWF  5A
017C4:  MOVWF  5D
017C6:  CALL   09BA
....................    i2c_write(address); 
017CA:  MOVFF  57,5D
017CE:  CALL   09BA
....................    i2c_write(data); 
017D2:  MOVFF  59,5D
017D6:  CALL   09BA
....................    i2c_stop(); 
017DA:  BCF    F94.4
017DC:  NOP   
017DE:  BSF    F94.3
017E0:  BTFSS  F82.3
017E2:  BRA    17E0
017E4:  NOP   
017E6:  BRA    17E8
017E8:  NOP   
017EA:  BSF    F94.4
017EC:  NOP   
....................    delay_ms(10); 
017EE:  MOVLW  0A
017F0:  MOVWF  5C
017F2:  CALL   0860
.................... } 
017F6:  RETURN 0
....................  
....................  
.................... BYTE read_ext_eeprom(long int address) { 
....................    BYTE data; 
....................  
....................    i2c_start(); 
*
00ABA:  BSF    F94.4
00ABC:  NOP   
00ABE:  BSF    F94.3
00AC0:  NOP   
00AC2:  BCF    F8B.4
00AC4:  BCF    F94.4
00AC6:  NOP   
00AC8:  BCF    F8B.3
00ACA:  BCF    F94.3
....................    i2c_write(((0xa0)|(hi(address)>>5))&0xfe); 
00ACC:  CLRF   5D
00ACE:  MOVLW  59
00AD0:  MOVWF  5C
00AD2:  MOVLW  01
00AD4:  ADDWF  5C,W
00AD6:  MOVWF  01
00AD8:  MOVLW  00
00ADA:  ADDWFC 5D,W
00ADC:  MOVWF  03
00ADE:  MOVFF  01,FE9
00AE2:  MOVWF  FEA
00AE4:  SWAPF  FEF,W
00AE6:  MOVWF  00
00AE8:  RRCF   00,F
00AEA:  MOVLW  07
00AEC:  ANDWF  00,F
00AEE:  MOVF   00,W
00AF0:  IORLW  A0
00AF2:  ANDLW  FE
00AF4:  MOVWF  5C
00AF6:  MOVWF  5D
00AF8:  RCALL  09BA
....................    i2c_write(hi(address)&0x3f); 
00AFA:  CLRF   5D
00AFC:  MOVLW  59
00AFE:  MOVWF  5C
00B00:  MOVLW  01
00B02:  ADDWF  5C,W
00B04:  MOVWF  01
00B06:  MOVLW  00
00B08:  ADDWFC 5D,W
00B0A:  MOVWF  03
00B0C:  MOVFF  01,FE9
00B10:  MOVWF  FEA
00B12:  MOVF   FEF,W
00B14:  ANDLW  3F
00B16:  MOVWF  5C
00B18:  MOVWF  5D
00B1A:  RCALL  09BA
....................    i2c_write(address); 
00B1C:  MOVFF  59,5D
00B20:  RCALL  09BA
....................    i2c_start(); 
00B22:  BSF    F94.4
00B24:  NOP   
00B26:  BSF    F94.3
00B28:  NOP   
00B2A:  BTFSS  F82.3
00B2C:  BRA    0B2A
00B2E:  BCF    F8B.4
00B30:  BCF    F94.4
00B32:  NOP   
00B34:  BCF    F8B.3
00B36:  BCF    F94.3
....................    i2c_write((0xa1)|(hi(address)>>5)); 
00B38:  CLRF   5D
00B3A:  MOVLW  59
00B3C:  MOVWF  5C
00B3E:  MOVLW  01
00B40:  ADDWF  5C,W
00B42:  MOVWF  01
00B44:  MOVLW  00
00B46:  ADDWFC 5D,W
00B48:  MOVWF  03
00B4A:  MOVFF  01,FE9
00B4E:  MOVWF  FEA
00B50:  SWAPF  FEF,W
00B52:  MOVWF  00
00B54:  RRCF   00,F
00B56:  MOVLW  07
00B58:  ANDWF  00,F
00B5A:  MOVF   00,W
00B5C:  IORLW  A1
00B5E:  MOVWF  5C
00B60:  MOVWF  5D
00B62:  RCALL  09BA
....................    data=i2c_read(0); 
00B64:  CLRF   00
00B66:  BRA    0A70
00B68:  MOVFF  01,5B
....................    i2c_stop(); 
00B6C:  BCF    F94.4
00B6E:  NOP   
00B70:  BSF    F94.3
00B72:  BTFSS  F82.3
00B74:  BRA    0B72
00B76:  NOP   
00B78:  BRA    0B7A
00B7A:  NOP   
00B7C:  BSF    F94.4
00B7E:  NOP   
....................    return(data); 
00B80:  MOVFF  5B,01
.................... } 
00B84:  RETURN 0
....................  
.................... #include "lcdfixed.c" 
.................... // Flex_LCD420.c 
....................  
.................... // These pins are for my Microchip PicDem2-Plus board, 
.................... // which I used to test this driver. 
.................... // An external 20x4 LCD is connected to these pins. 
.................... // Change these pins to match your own board's connections. 
....................  
.................... #define LCD_DB4   PIN_E2 
.................... #define LCD_DB5   PIN_E1 
.................... #define LCD_DB6   PIN_E0 
.................... #define LCD_DB7   PIN_A5 
....................  
.................... #define LCD_RS    PIN_D2 
.................... #define LCD_RW    PIN_D1 
.................... #define LCD_E     PIN_D0 
....................  
.................... /* 
.................... // To prove that the driver can be used with random 
.................... // pins, I also tested it with these pins: 
.................... #define LCD_DB4   PIN_D4 
.................... #define LCD_DB5   PIN_B1 
.................... #define LCD_DB6   PIN_C5 
.................... #define LCD_DB7   PIN_B5 
....................  
.................... #define LCD_RS    PIN_E2 
.................... #define LCD_RW    PIN_B2 
.................... #define LCD_E     PIN_D6 
.................... */ 
....................  
.................... // If you want only a 6-pin interface to your LCD, then 
.................... // connect the R/W pin on the LCD to ground, and comment 
.................... // out the following line.  Doing so will save one PIC 
.................... // pin, but at the cost of losing the ability to read from 
.................... // the LCD.  It also makes the write time a little longer 
.................... // because a static delay must be used, instead of polling 
.................... // the LCD's busy bit.  Normally a 6-pin interface is only 
.................... // used if you are running out of PIC pins, and you need 
.................... // to use as few as possible for the LCD. 
.................... #define USE_RW_PIN   1      
....................  
....................  
.................... // These are the line addresses for most 4x20 LCDs. 
.................... #define LCD_LINE_1_ADDRESS 0x00 
.................... #define LCD_LINE_2_ADDRESS 0x40 
.................... #define LCD_LINE_3_ADDRESS 0x14 
.................... #define LCD_LINE_4_ADDRESS 0x54 
....................  
.................... // These are the line addresses for LCD's which use 
.................... // the Hitachi HD66712U controller chip. 
.................... /* 
.................... #define LCD_LINE_1_ADDRESS 0x00 
.................... #define LCD_LINE_2_ADDRESS 0x20 
.................... #define LCD_LINE_3_ADDRESS 0x40 
.................... #define LCD_LINE_4_ADDRESS 0x60 
.................... */ 
....................  
....................  
.................... //======================================== 
....................  
.................... #define lcd_type 2   // 0=5x7, 1=5x10, 2=2 lines(or more) 
....................  
.................... int8 lcd_line; 
....................  
.................... int8 const LCD_INIT_STRING[4] = 
.................... { 
....................  0x20 | (lcd_type << 2),  // Set mode: 4-bit, 2+ lines, 5x8 dots 
....................  0xc,                     // Display on 
....................  1,                       // Clear display 
....................  6                        // Increment cursor 
....................  }; 
....................                               
....................  
.................... //------------------------------------- 
.................... void lcd_send_nibble(int8 nibble) 
.................... { 
.................... // Note:  !! converts an integer expression 
.................... // to a boolean (1 or 0). 
....................  output_bit(LCD_DB4, !!(nibble & 1)); 
*
00888:  BTFSC  x63.0
0088A:  BRA    0890
0088C:  BCF    F8D.2
0088E:  BRA    0892
00890:  BSF    F8D.2
00892:  BCF    F96.2
....................  output_bit(LCD_DB5, !!(nibble & 2));  
00894:  BTFSC  x63.1
00896:  BRA    089C
00898:  BCF    F8D.1
0089A:  BRA    089E
0089C:  BSF    F8D.1
0089E:  BCF    F96.1
....................  output_bit(LCD_DB6, !!(nibble & 4));    
008A0:  BTFSC  x63.2
008A2:  BRA    08A8
008A4:  BCF    F8D.0
008A6:  BRA    08AA
008A8:  BSF    F8D.0
008AA:  BCF    F96.0
....................  output_bit(LCD_DB7, !!(nibble & 8));    
008AC:  BTFSC  x63.3
008AE:  BRA    08B4
008B0:  BCF    F89.5
008B2:  BRA    08B6
008B4:  BSF    F89.5
008B6:  BCF    F92.5
....................  
....................  delay_cycles(1); 
008B8:  NOP   
....................  output_high(LCD_E); 
008BA:  BCF    F95.0
008BC:  BSF    F8C.0
....................  delay_us(2); 
008BE:  BRA    08C0
....................  output_low(LCD_E); 
008C0:  BCF    F95.0
008C2:  BCF    F8C.0
.................... } 
008C4:  RETURN 0
....................  
.................... //----------------------------------- 
.................... // This sub-routine is only called by lcd_read_byte(). 
.................... // It's not a stand-alone routine.  For example, the 
.................... // R/W signal is set high by lcd_read_byte() before 
.................... // this routine is called.      
....................  
.................... #ifdef USE_RW_PIN 
.................... int8 lcd_read_nibble(void) 
.................... { 
.................... int8 retval; 
.................... // Create bit variables so that we can easily set 
.................... // individual bits in the retval variable. 
.................... #bit retval_0 = retval.0 
.................... #bit retval_1 = retval.1 
.................... #bit retval_2 = retval.2 
.................... #bit retval_3 = retval.3 
....................  
.................... retval = 0; 
008C6:  CLRF   x64
....................     
.................... output_high(LCD_E); 
008C8:  BCF    F95.0
008CA:  BSF    F8C.0
.................... delay_us(1); 
008CC:  NOP   
....................  
.................... retval_0 = input(LCD_DB4); 
008CE:  BSF    F96.2
008D0:  BCF    x64.0
008D2:  BTFSC  F84.2
008D4:  BSF    x64.0
.................... retval_1 = input(LCD_DB5); 
008D6:  BSF    F96.1
008D8:  BCF    x64.1
008DA:  BTFSC  F84.1
008DC:  BSF    x64.1
.................... retval_2 = input(LCD_DB6); 
008DE:  BSF    F96.0
008E0:  BCF    x64.2
008E2:  BTFSC  F84.0
008E4:  BSF    x64.2
.................... retval_3 = input(LCD_DB7); 
008E6:  BSF    F92.5
008E8:  BCF    x64.3
008EA:  BTFSC  F80.5
008EC:  BSF    x64.3
....................   
.................... output_low(LCD_E); 
008EE:  BCF    F95.0
008F0:  BCF    F8C.0
.................... delay_us(1); 
008F2:  NOP   
....................     
.................... return(retval);    
008F4:  MOVFF  64,01
.................... }    
008F8:  RETURN 0
.................... #endif 
....................  
.................... //--------------------------------------- 
.................... // Read a byte from the LCD and return it. 
....................  
.................... #ifdef USE_RW_PIN 
.................... int8 lcd_read_byte(void) 
.................... { 
.................... int8 low; 
.................... int8 high; 
....................  
.................... output_high(LCD_RW); 
008FA:  BCF    F95.1
008FC:  BSF    F8C.1
.................... delay_cycles(1); 
008FE:  NOP   
....................  
.................... high = lcd_read_nibble(); 
00900:  RCALL  08C6
00902:  MOVFF  01,63
....................  
.................... low = lcd_read_nibble(); 
00906:  RCALL  08C6
00908:  MOVFF  01,62
....................  
.................... return( (high<<4) | low); 
0090C:  SWAPF  x63,W
0090E:  MOVWF  00
00910:  MOVLW  F0
00912:  ANDWF  00,F
00914:  MOVF   00,W
00916:  IORWF  x62,W
00918:  MOVWF  01
.................... } 
0091A:  GOTO   0924 (RETURN)
.................... #endif 
....................  
.................... //---------------------------------------- 
.................... // Send a byte to the LCD. 
.................... void lcd_send_byte(int8 address, int8 n) 
.................... { 
.................... output_low(LCD_RS); 
0091E:  BCF    F95.2
00920:  BCF    F8C.2
....................  
.................... #ifdef USE_RW_PIN 
.................... while(bit_test(lcd_read_byte(),7)) ; 
00922:  BRA    08FA
00924:  MOVFF  01,62
00928:  BTFSC  01.7
0092A:  BRA    0922
.................... #else 
.................... delay_us(60);  
.................... #endif 
....................  
.................... if(address) 
0092C:  MOVF   x60,F
0092E:  BZ    0936
....................    output_high(LCD_RS); 
00930:  BCF    F95.2
00932:  BSF    F8C.2
.................... else 
00934:  BRA    093A
....................    output_low(LCD_RS); 
00936:  BCF    F95.2
00938:  BCF    F8C.2
....................       
....................  delay_cycles(1); 
0093A:  NOP   
....................  
.................... #ifdef USE_RW_PIN 
.................... output_low(LCD_RW); 
0093C:  BCF    F95.1
0093E:  BCF    F8C.1
.................... delay_cycles(1); 
00940:  NOP   
.................... #endif 
....................  
.................... output_low(LCD_E); 
00942:  BCF    F95.0
00944:  BCF    F8C.0
....................  
.................... lcd_send_nibble(n >> 4); 
00946:  SWAPF  x61,W
00948:  MOVWF  x62
0094A:  MOVLW  0F
0094C:  ANDWF  x62,F
0094E:  MOVFF  62,63
00952:  RCALL  0888
.................... lcd_send_nibble(n & 0xf); 
00954:  MOVF   x61,W
00956:  ANDLW  0F
00958:  MOVWF  x62
0095A:  MOVWF  x63
0095C:  RCALL  0888
.................... } 
0095E:  RETURN 0
.................... //---------------------------- 
....................  
.................... void lcd_init(void) 
.................... { 
.................... int8 i; 
....................  
.................... lcd_line = 1; 
00960:  MOVLW  01
00962:  MOVWF  1B
....................  
.................... output_low(LCD_RS); 
00964:  BCF    F95.2
00966:  BCF    F8C.2
....................  
.................... #ifdef USE_RW_PIN 
.................... output_low(LCD_RW); 
00968:  BCF    F95.1
0096A:  BCF    F8C.1
.................... #endif 
....................  
.................... output_low(LCD_E); 
0096C:  BCF    F95.0
0096E:  BCF    F8C.0
....................  
.................... // Some LCDs require 15 ms minimum delay after 
.................... // power-up.  Others require 30 ms.  I'm going 
.................... // to set it to 35 ms, so it should work with 
.................... // all of them. 
.................... delay_ms(35);          
00970:  MOVLW  23
00972:  MOVWF  5C
00974:  RCALL  0860
....................  
.................... for(i=0 ;i < 3; i++) 
00976:  CLRF   54
00978:  MOVF   54,W
0097A:  SUBLW  02
0097C:  BNC   098E
....................    { 
....................     lcd_send_nibble(0x03); 
0097E:  MOVLW  03
00980:  MOVWF  x63
00982:  RCALL  0888
....................     delay_ms(5); 
00984:  MOVLW  05
00986:  MOVWF  5C
00988:  RCALL  0860
....................    } 
0098A:  INCF   54,F
0098C:  BRA    0978
....................  
.................... lcd_send_nibble(0x02); 
0098E:  MOVLW  02
00990:  MOVWF  x63
00992:  RCALL  0888
....................  
.................... for(i=0; i < sizeof(LCD_INIT_STRING); i++) 
00994:  CLRF   54
00996:  MOVF   54,W
00998:  SUBLW  03
0099A:  BNC   09B0
....................    { 
....................     lcd_send_byte(0, LCD_INIT_STRING[i]); 
0099C:  CLRF   03
0099E:  MOVF   54,W
009A0:  CALL   00C6
009A4:  MOVWF  55
009A6:  CLRF   x60
009A8:  MOVWF  x61
009AA:  RCALL  091E
....................     
....................     // If the R/W signal is not used, then 
....................     // the busy bit can't be polled.  One of 
....................     // the init commands takes longer than 
....................     // the hard-coded delay of 50 us, so in 
....................     // that case, lets just do a 5 ms delay 
....................     // after all four of them. 
....................     #ifndef USE_RW_PIN 
....................     delay_ms(5); 
....................     #endif 
....................    } 
009AC:  INCF   54,F
009AE:  BRA    0996
....................  
.................... } 
009B0:  RETURN 0
....................  
.................... //---------------------------- 
....................  
.................... void lcd_gotoxy(int8 x, int8 y) 
.................... { 
.................... int8 address; 
....................  
....................  
.................... switch(y) 
....................   { 
*
00CC8:  MOVF   5D,W
00CCA:  XORLW  01
00CCC:  BZ    0CDC
00CCE:  XORLW  03
00CD0:  BZ    0CE0
00CD2:  XORLW  01
00CD4:  BZ    0CE6
00CD6:  XORLW  07
00CD8:  BZ    0CEC
00CDA:  BRA    0CF2
....................    case 1: 
....................      address = LCD_LINE_1_ADDRESS; 
00CDC:  CLRF   5E
....................      break; 
00CDE:  BRA    0CF6
....................  
....................    case 2: 
....................      address = LCD_LINE_2_ADDRESS; 
00CE0:  MOVLW  40
00CE2:  MOVWF  5E
....................      break; 
00CE4:  BRA    0CF6
....................  
....................    case 3: 
....................      address = LCD_LINE_3_ADDRESS; 
00CE6:  MOVLW  14
00CE8:  MOVWF  5E
....................      break; 
00CEA:  BRA    0CF6
....................  
....................    case 4: 
....................      address = LCD_LINE_4_ADDRESS; 
00CEC:  MOVLW  54
00CEE:  MOVWF  5E
....................      break; 
00CF0:  BRA    0CF6
....................  
....................    default: 
....................      address = LCD_LINE_1_ADDRESS; 
00CF2:  CLRF   5E
....................      break; 
00CF4:  BRA    0CF6
....................       
....................   } 
....................  
.................... address += x-1; 
00CF6:  MOVLW  01
00CF8:  SUBWF  5C,W
00CFA:  ADDWF  5E,F
.................... lcd_send_byte(0, 0x80 | address); 
00CFC:  MOVF   5E,W
00CFE:  IORLW  80
00D00:  MOVWF  5F
00D02:  CLRF   x60
00D04:  MOVWF  x61
00D06:  RCALL  091E
.................... } 
00D08:  RETURN 0
....................  
.................... //----------------------------- 
.................... void lcd_putc(char c) 
.................... { 
....................  switch(c) 
....................    { 
00D0A:  MOVF   5B,W
00D0C:  XORLW  0C
00D0E:  BZ    0D1A
00D10:  XORLW  06
00D12:  BZ    0D2E
00D14:  XORLW  02
00D16:  BZ    0D3C
00D18:  BRA    0D46
....................     case '\f': 
....................       lcd_send_byte(0,1); 
00D1A:  CLRF   x60
00D1C:  MOVLW  01
00D1E:  MOVWF  x61
00D20:  RCALL  091E
....................       lcd_line = 1; 
00D22:  MOVLW  01
00D24:  MOVWF  1B
....................       delay_ms(2); 
00D26:  MOVLW  02
00D28:  MOVWF  5C
00D2A:  RCALL  0860
....................       break; 
00D2C:  BRA    0D52
....................     
....................     case '\n': 
....................        lcd_gotoxy(1, ++lcd_line); 
00D2E:  INCF   1B,F
00D30:  MOVLW  01
00D32:  MOVWF  5C
00D34:  MOVFF  1B,5D
00D38:  RCALL  0CC8
....................        break; 
00D3A:  BRA    0D52
....................     
....................     case '\b': 
....................        lcd_send_byte(0,0x10); 
00D3C:  CLRF   x60
00D3E:  MOVLW  10
00D40:  MOVWF  x61
00D42:  RCALL  091E
....................        break; 
00D44:  BRA    0D52
....................     
....................     default: 
....................        lcd_send_byte(1,c); 
00D46:  MOVLW  01
00D48:  MOVWF  x60
00D4A:  MOVFF  5B,61
00D4E:  RCALL  091E
....................        break; 
00D50:  BRA    0D52
....................    } 
.................... } 
00D52:  RETURN 0
....................  
.................... //------------------------------ 
.................... #ifdef USE_RW_PIN 
.................... char lcd_getc(int8 x, int8 y) 
.................... { 
.................... char value; 
....................  
.................... lcd_gotoxy(x,y); 
....................  
.................... // Wait until busy flag is low. 
.................... while(bit_test(lcd_read_byte(),7));  
....................  
.................... output_high(LCD_RS); 
.................... value = lcd_read_byte(); 
.................... output_low(LCD_RS); 
....................  
.................... return(value); 
.................... } 
.................... #endif  
....................  
.................... #include "run_mode1.c" 
....................  
.................... void setup_io_dieukhien() 
.................... { 
....................    Van1_IO=0; 
*
00850:  BCF    F94.5
....................    Van2_IO=0; 
00852:  BCF    F94.2
....................    Van3_IO=0; 
00854:  BCF    F95.4
....................    Van4_IO=0; 
00856:  BCF    F95.5
....................    Van5_IO=0; 
00858:  BCF    F95.6
....................    //Van6_IO=1; 
....................    MAYBOM_IO=0; 
0085A:  BCF    F95.3
.................... } 
0085C:  GOTO   25E4 (RETURN)
.................... // ham bat tat ca cac van dieu tu len 
.................... void on_all_van() 
.................... { 
....................    Van1=1; 
*
00590:  BSF    F8B.5
....................    Van2=1; 
00592:  BSF    F8B.2
....................    Van3=1; 
00594:  BSF    F8C.4
....................    Van4=1; 
00596:  BSF    F8C.5
....................    Van5=1; 
00598:  BSF    F8C.6
....................    //Van6=0; 
....................    Maybom=1;  
0059A:  BSF    F8C.3
.................... } 
0059C:  RETURN 0
.................... // ham tat het cac van dien tu 
.................... void off_all_van() 
.................... { 
....................    Maybom=0; 
0059E:  BCF    F8C.3
....................    Van1=0; 
005A0:  BCF    F8B.5
....................    Van2=0; 
005A2:  BCF    F8B.2
....................    Van3=0; 
005A4:  BCF    F8C.4
....................    Van4=0; 
005A6:  BCF    F8C.5
....................    Van5=0; 
005A8:  BCF    F8C.6
....................    //Van6=0; 
.................... } 
005AA:  RETURN 0
.................... // ham nay duoc su dung trong ngat uart khi nhan ban tin dieu khien 
.................... // tu gateway 
.................... // bien rx_data la bien luu gia tri data nhan tu uart 
.................... void dieukhien_van() 
.................... { 
....................     
....................    unsigned long i; 
....................    rx_data = RCREG; 
005AC:  MOVFF  FAE,1A
....................    //nhan du lieu va dua vao du lieu nhan dc vao bien data 
....................    // check xem ban tin du lieu la gi 
....................    switch(rx_data) 
....................    { 
005B0:  MOVF   1A,W
005B2:  XORLW  81
005B4:  BZ    05F8
005B6:  XORLW  03
005B8:  BZ    0606
005BA:  XORLW  01
005BC:  BZ    0614
005BE:  XORLW  07
005C0:  BZ    0622
005C2:  XORLW  01
005C4:  BZ    0630
005C6:  XORLW  03
005C8:  BZ    063E
005CA:  XORLW  09
005CC:  BZ    064C
005CE:  XORLW  8E
005D0:  BZ    0656
005D2:  XORLW  03
005D4:  BTFSC  FD8.2
005D6:  BRA    0690
005D8:  XORLW  01
005DA:  BTFSC  FD8.2
005DC:  BRA    06CA
005DE:  XORLW  07
005E0:  BTFSC  FD8.2
005E2:  BRA    0704
005E4:  XORLW  01
005E6:  BTFSC  FD8.2
005E8:  BRA    073E
005EA:  XORLW  03
005EC:  BTFSC  FD8.2
005EE:  BRA    0778
005F0:  XORLW  09
005F2:  BTFSC  FD8.2
005F4:  BRA    07B2
005F6:  BRA    07BA
....................       // nhan duoc ban tin bat van 1 
....................       case 0x81: 
....................       { 
....................          Van1=1;                 // bat van 1 
005F8:  BSF    F8B.5
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x81); 
005FA:  MOVLW  81
005FC:  MOVWF  x6B
005FE:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1; 
00600:  BTFSS  F8C.3
00602:  BSF    F8C.3
....................       } 
....................       break; 
00604:  BRA    07BC
....................       // nhan duoc ban tin dieu khien van 2 
....................       case 0x82: 
....................       { 
....................          Van2=1;                 // bat van 2 
00606:  BSF    F8B.2
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x82); 
00608:  MOVLW  82
0060A:  MOVWF  x6B
0060C:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1  ;        
0060E:  BTFSS  F8C.3
00610:  BSF    F8C.3
....................       } 
....................       break; 
00612:  BRA    07BC
....................       // nhan duoc ban tin dieu khien van 3 
....................       case 0x83: 
....................       { 
....................          Van3=1;                 // bat van 3 
00614:  BSF    F8C.4
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x83); 
00616:  MOVLW  83
00618:  MOVWF  x6B
0061A:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1   ;       
0061C:  BTFSS  F8C.3
0061E:  BSF    F8C.3
....................       } 
....................       break; 
00620:  BRA    07BC
....................       // nhan duoc ban tin dieu khien van 4 
....................       case 0x84: 
....................       { 
....................          Van4=1;                 // bat van 4 
00622:  BSF    F8C.5
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x84); 
00624:  MOVLW  84
00626:  MOVWF  x6B
00628:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1  ;        
0062A:  BTFSS  F8C.3
0062C:  BSF    F8C.3
....................       } 
....................       break; 
0062E:  BRA    07BC
....................       // nhan duoc ban tin dieu khien van 5 
....................       case 0x85: 
....................       { 
....................          Van5=1;                 // bat van 5 
00630:  BSF    F8C.6
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x85); 
00632:  MOVLW  85
00634:  MOVWF  x6B
00636:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1   ;       
00638:  BTFSS  F8C.3
0063A:  BSF    F8C.3
....................       } 
....................       break; 
0063C:  BRA    07BC
....................       // nhan duoc ban tin dieu khien van 6 
....................       // van 6 dung cho vuon tue 
....................       case 0x86: 
....................       { 
....................          Van6=1;                 // bat van 6 
0063E:  BSF    F8C.7
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x86); 
00640:  MOVLW  86
00642:  MOVWF  x6B
00644:  RCALL  0586
....................          // check xem may bom co duoc bat khong? 
....................          // neu may bom dang tat thi bat may bom len  
....................          if(MAYBOM!=1) Maybom=1   ;       
00646:  BTFSS  F8C.3
00648:  BSF    F8C.3
....................       } 
....................       break; 
0064A:  BRA    07BC
....................       // nhan duoc ban tin bat tat ca cac van  
....................       case 0x8F: 
....................       {                
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x8F); 
0064C:  MOVLW  8F
0064E:  MOVWF  x6B
00650:  RCALL  0586
....................          on_all_van(); 
00652:  RCALL  0590
....................       } 
....................       break; 
00654:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 1 
....................       case 0x01: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x01); 
00656:  MOVLW  01
00658:  MOVWF  x6B
0065A:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van2==0&&Van3==0&&Van4==0&&Van5==0&&Van6==0)  
0065C:  BTFSC  F8B.2
0065E:  BRA    068C
00660:  BTFSC  F8C.4
00662:  BRA    068C
00664:  BTFSC  F8C.5
00666:  BRA    068C
00668:  BTFSC  F8C.6
0066A:  BRA    068C
0066C:  BTFSC  F8C.7
0066E:  BRA    068C
....................          { 
....................             Maybom=0; 
00670:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
00672:  CLRF   x6A
00674:  CLRF   x69
00676:  MOVF   x6A,W
00678:  SUBLW  03
0067A:  BNC   068C
0067C:  BNZ   0684
0067E:  MOVF   x69,W
00680:  SUBLW  E7
00682:  BNC   068C
00684:  INCF   x69,F
00686:  BTFSC  FD8.2
00688:  INCF   x6A,F
0068A:  BRA    0676
....................          } 
....................          Van1=0;                 // tat van 1 
0068C:  BCF    F8B.5
....................       } 
....................       break; 
0068E:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 2 
....................       case 0x02: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x02); 
00690:  MOVLW  02
00692:  MOVWF  x6B
00694:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van1==0&&Van3==0&&Van4==0&&Van5==0&&Van6==0)  
00696:  BTFSC  F8B.5
00698:  BRA    06C6
0069A:  BTFSC  F8C.4
0069C:  BRA    06C6
0069E:  BTFSC  F8C.5
006A0:  BRA    06C6
006A2:  BTFSC  F8C.6
006A4:  BRA    06C6
006A6:  BTFSC  F8C.7
006A8:  BRA    06C6
....................          { 
....................             Maybom=0; 
006AA:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
006AC:  CLRF   x6A
006AE:  CLRF   x69
006B0:  MOVF   x6A,W
006B2:  SUBLW  03
006B4:  BNC   06C6
006B6:  BNZ   06BE
006B8:  MOVF   x69,W
006BA:  SUBLW  E7
006BC:  BNC   06C6
006BE:  INCF   x69,F
006C0:  BTFSC  FD8.2
006C2:  INCF   x6A,F
006C4:  BRA    06B0
....................          } 
....................          Van2=0;                 // tat van 2 
006C6:  BCF    F8B.2
....................       } 
....................       break; 
006C8:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 3 
....................       case 0x03: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x03); 
006CA:  MOVLW  03
006CC:  MOVWF  x6B
006CE:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van1==0&&Van2==0&&Van4==0&&Van5==0&&Van6==0)  
006D0:  BTFSC  F8B.5
006D2:  BRA    0700
006D4:  BTFSC  F8B.2
006D6:  BRA    0700
006D8:  BTFSC  F8C.5
006DA:  BRA    0700
006DC:  BTFSC  F8C.6
006DE:  BRA    0700
006E0:  BTFSC  F8C.7
006E2:  BRA    0700
....................          { 
....................             Maybom=0; 
006E4:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
006E6:  CLRF   x6A
006E8:  CLRF   x69
006EA:  MOVF   x6A,W
006EC:  SUBLW  03
006EE:  BNC   0700
006F0:  BNZ   06F8
006F2:  MOVF   x69,W
006F4:  SUBLW  E7
006F6:  BNC   0700
006F8:  INCF   x69,F
006FA:  BTFSC  FD8.2
006FC:  INCF   x6A,F
006FE:  BRA    06EA
....................          } 
....................          Van3=0;                 // tat van 3 
00700:  BCF    F8C.4
....................       } 
....................       break; 
00702:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 4 
....................       case 0x04: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x04); 
00704:  MOVLW  04
00706:  MOVWF  x6B
00708:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van1==0&&Van2==0&&Van3==0&&Van5==0&&Van6==0)  
0070A:  BTFSC  F8B.5
0070C:  BRA    073A
0070E:  BTFSC  F8B.2
00710:  BRA    073A
00712:  BTFSC  F8C.4
00714:  BRA    073A
00716:  BTFSC  F8C.6
00718:  BRA    073A
0071A:  BTFSC  F8C.7
0071C:  BRA    073A
....................          { 
....................             Maybom=0; 
0071E:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
00720:  CLRF   x6A
00722:  CLRF   x69
00724:  MOVF   x6A,W
00726:  SUBLW  03
00728:  BNC   073A
0072A:  BNZ   0732
0072C:  MOVF   x69,W
0072E:  SUBLW  E7
00730:  BNC   073A
00732:  INCF   x69,F
00734:  BTFSC  FD8.2
00736:  INCF   x6A,F
00738:  BRA    0724
....................          } 
....................          Van4=0;                 // tat van 4 
0073A:  BCF    F8C.5
....................       } 
....................       break; 
0073C:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 5 
....................       case 0x05: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x05); 
0073E:  MOVLW  05
00740:  MOVWF  x6B
00742:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van1==0&&Van2==0&&Van3==0&&Van4==0&&Van6==0)  
00744:  BTFSC  F8B.5
00746:  BRA    0774
00748:  BTFSC  F8B.2
0074A:  BRA    0774
0074C:  BTFSC  F8C.4
0074E:  BRA    0774
00750:  BTFSC  F8C.5
00752:  BRA    0774
00754:  BTFSC  F8C.7
00756:  BRA    0774
....................          { 
....................             Maybom=0; 
00758:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
0075A:  CLRF   x6A
0075C:  CLRF   x69
0075E:  MOVF   x6A,W
00760:  SUBLW  03
00762:  BNC   0774
00764:  BNZ   076C
00766:  MOVF   x69,W
00768:  SUBLW  E7
0076A:  BNC   0774
0076C:  INCF   x69,F
0076E:  BTFSC  FD8.2
00770:  INCF   x6A,F
00772:  BRA    075E
....................          } 
....................          Van5=0;                 // tat van 5 
00774:  BCF    F8C.6
....................       } 
....................       break; 
00776:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat van 6 
....................       case 0x06: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x06); 
00778:  MOVLW  06
0077A:  MOVWF  x6B
0077C:  RCALL  0586
....................          // check xem co con van nao duoc bat khong? 
....................          // neu nhu cac van tat het thi tat may bom 
....................          // sau do moi tat van duoc dieu khien 
....................          if(Van1==0&&Van2==0&&Van3==0&&Van4==0&&Van5==0)  
0077E:  BTFSC  F8B.5
00780:  BRA    07B0
00782:  BTFSC  F8B.2
00784:  BRA    07B0
00786:  BTFSC  F8C.4
00788:  BRA    07B0
0078A:  BTFSC  F8C.5
0078C:  BRA    07B0
0078E:  BTFSC  F8C.6
00790:  BRA    07B0
....................          { 
....................             Maybom=0; 
00792:  BCF    F8C.3
....................             // tre 1 khoang thoi gian roi moi tat van dieu khien 
....................             for(i=0;i<1000;i++); 
00794:  CLRF   x6A
00796:  CLRF   x69
00798:  MOVF   x6A,W
0079A:  SUBLW  03
0079C:  BNC   07AE
0079E:  BNZ   07A6
007A0:  MOVF   x69,W
007A2:  SUBLW  E7
007A4:  BNC   07AE
007A6:  INCF   x69,F
007A8:  BTFSC  FD8.2
007AA:  INCF   x6A,F
007AC:  BRA    0798
....................             Van6=0;                 // tat van 1 
007AE:  BCF    F8C.7
....................          } 
....................       } 
....................       break; 
007B0:  BRA    07BC
....................       // nhan duoc ban tin dieu khien tat het cac van 
....................       case 0x0F: 
....................       { 
....................          //gui lai ban tin phan hoi cho gateway thong qua uart 
....................          uart_putchar(0x0F); 
007B2:  MOVLW  0F
007B4:  MOVWF  x6B
007B6:  RCALL  0586
....................          off_all_van(); 
007B8:  RCALL  059E
....................       } 
....................       default: 
....................       break; 
007BA:  BRA    07BC
....................    } 
....................    rx_data=0; 
007BC:  CLRF   1A
.................... } 
007BE:  GOTO   07C8 (RETURN)
....................  
.................... #include "time_control.c" 
.................... // FILE TIME_CONTROL DUNG DE SETUP CAC THONG SO CUA THOI GIAN 
.................... // DA BAO GOM KHAI BAO CAC THONG SO CAN THIET 
.................... // include cac ham can thiet vao thu vien 
.................... //#include "lcdfixed.c"      // khai bao ham cho lcd 
.................... //------------------------------------------------------------- 
....................  
.................... //bien luu gia tri thoi gian tam thoi 
.................... unsigned char   second,minute,hour,day=1,date,month,year; 
.................... unsigned char   temp_max, huff_max,temp,huff;         //,huff_max_temp,temp_max_temp; 
.................... //bien luu xem dang chinh gio, phut, giay, ngay thang? 
.................... unsigned char state_settime=1,set_flag_mode2,STT_time_on; 
.................... unsigned char maybom_on=0,count_in=0; 
.................... unsigned char mode_run=0,menu_system,mode_run_flag=1; 
.................... struct Time_on_off 
.................... { 
....................    unsigned char hour_on; 
....................    unsigned char minute_on; 
....................    unsigned char time_on; 
....................    unsigned char state_on; 
.................... }; 
....................  
.................... struct Time_on_off DEV_INFO[5]; 
.................... //time---------------------------------------------------------------------- 
.................... //bien luu tiet hoc dung cho auto alarm 
....................  
.................... unsigned long     sum_on_min,sum_on_max,sum_on;  
....................  
....................  
.................... //------------------------------------------------------------------------- 
.................... void put_time(unsigned char time,int x, int y); 
.................... void put_date_info(); 
.................... void put_time_info(); 
.................... void lcd_blink_on(); 
.................... void lcd_blink_off(); 
.................... // ham doc cac gia tri tu ds1307 
.................... void update_time() 
.................... { 
....................    second =bcd2bin(read_DS1307(0x00)); 
*
003F2:  CLRF   x65
003F4:  RCALL  0378
003F6:  MOVFF  01,65
003FA:  MOVFF  01,66
003FE:  RCALL  03D8
00400:  MOVFF  01,1C
....................    minute =bcd2bin(read_DS1307(0x01)); 
00404:  MOVLW  01
00406:  MOVWF  x65
00408:  RCALL  0378
0040A:  MOVFF  01,65
0040E:  MOVFF  01,66
00412:  RCALL  03D8
00414:  MOVFF  01,1D
....................    hour   =bcd2bin(read_DS1307(0x02)); 
00418:  MOVLW  02
0041A:  MOVWF  x65
0041C:  RCALL  0378
0041E:  MOVFF  01,65
00422:  MOVFF  01,66
00426:  RCALL  03D8
00428:  MOVFF  01,1E
....................    day    =bcd2bin(read_DS1307(0x03)); 
0042C:  MOVLW  03
0042E:  MOVWF  x65
00430:  RCALL  0378
00432:  MOVFF  01,65
00436:  MOVFF  01,66
0043A:  RCALL  03D8
0043C:  MOVFF  01,1F
....................    date   =bcd2bin(read_DS1307(0x04)); 
00440:  MOVLW  04
00442:  MOVWF  x65
00444:  RCALL  0378
00446:  MOVFF  01,65
0044A:  MOVFF  01,66
0044E:  RCALL  03D8
00450:  MOVFF  01,20
....................    month  =bcd2bin(read_DS1307(0x05)); 
00454:  MOVLW  05
00456:  MOVWF  x65
00458:  RCALL  0378
0045A:  MOVFF  01,65
0045E:  MOVFF  01,66
00462:  RCALL  03D8
00464:  MOVFF  01,21
....................    year   =bcd2bin(read_DS1307(0x06));      
00468:  MOVLW  06
0046A:  MOVWF  x65
0046C:  RCALL  0378
0046E:  MOVFF  01,65
00472:  MOVFF  01,66
00476:  RCALL  03D8
00478:  MOVFF  01,22
.................... } 
0047C:  RETURN 0
.................... //------------------------------------------------------------------------------------ 
.................... //dung ham put_time de in ra second, minute, hour, date, month, year 
.................... // input : gia tri cua bien can in ra 
.................... //         vi tri cua bien can in ra tren LCD 
.................... // output : none 
.................... void put_time(unsigned char time,int x, int y)  
.................... { 
*
00D74:  CLRF   19
00D76:  BTFSC  FF2.7
00D78:  BSF    19.7
00D7A:  BCF    FF2.7
....................     unsigned char time_low,time_high; 
....................     // tach bien time thanh 2 so hien thi tren lcd 
....................     time_high = time/10 + 0x30; 
00D7C:  MOVFF  56,67
00D80:  MOVLW  0A
00D82:  MOVWF  x68
00D84:  CALL   047E
00D88:  BTFSC  19.7
00D8A:  BSF    FF2.7
00D8C:  MOVLW  30
00D8E:  ADDWF  01,W
00D90:  MOVWF  5A
00D92:  CLRF   19
00D94:  BTFSC  FF2.7
00D96:  BSF    19.7
00D98:  BCF    FF2.7
....................     time_low  = time%10 + 0x30;  
00D9A:  MOVFF  56,67
00D9E:  MOVLW  0A
00DA0:  MOVWF  x68
00DA2:  CALL   047E
00DA6:  BTFSC  19.7
00DA8:  BSF    FF2.7
00DAA:  MOVLW  30
00DAC:  ADDWF  00,W
00DAE:  MOVWF  59
....................     // di den vi tri x,y hien thi gia tri time 
....................     lcd_gotoxy(x,y); 
00DB0:  MOVFF  57,5C
00DB4:  MOVFF  58,5D
00DB8:  RCALL  0CC8
....................     lcd_putc(time_high); 
00DBA:  MOVFF  5A,5B
00DBE:  RCALL  0D0A
....................     lcd_putc(time_low ); 
00DC0:  MOVFF  59,5B
00DC4:  RCALL  0D0A
.................... } 
00DC6:  RETURN 0
....................  
.................... //----------------------------------------------------------------------------------- 
.................... //void put_data_info : hien thi thong tin thu ngay thang tren lcd 
.................... //input: none 
.................... //output: none 
.................... void put_date_info() 
.................... { 
....................     lcd_gotoxy(1,3); 
*
00E28:  MOVLW  01
00E2A:  MOVWF  5C
00E2C:  MOVLW  03
00E2E:  MOVWF  5D
00E30:  RCALL  0CC8
....................     printf(lcd_putc,"   ");   
00E32:  MOVLW  20
00E34:  MOVWF  5B
00E36:  RCALL  0D0A
00E38:  MOVLW  20
00E3A:  MOVWF  5B
00E3C:  RCALL  0D0A
00E3E:  MOVLW  20
00E40:  MOVWF  5B
00E42:  RCALL  0D0A
....................     switch(day) 
....................     {  
00E44:  MOVF   1F,W
00E46:  XORLW  01
00E48:  BZ    0E64
00E4A:  XORLW  03
00E4C:  BZ    0E78
00E4E:  XORLW  01
00E50:  BZ    0E8C
00E52:  XORLW  07
00E54:  BZ    0EA0
00E56:  XORLW  01
00E58:  BZ    0EB4
00E5A:  XORLW  03
00E5C:  BZ    0EC8
00E5E:  XORLW  01
00E60:  BZ    0EDC
00E62:  BRA    0EF0
....................         // neu la chu nhat  
....................         case 1: 
....................             printf(lcd_putc,"CN "); 
00E64:  MOVLW  43
00E66:  MOVWF  5B
00E68:  RCALL  0D0A
00E6A:  MOVLW  4E
00E6C:  MOVWF  5B
00E6E:  RCALL  0D0A
00E70:  MOVLW  20
00E72:  MOVWF  5B
00E74:  RCALL  0D0A
....................          break; 
00E76:  BRA    0EF2
....................         // neu la thu 2  
....................         case 2: 
....................             printf(lcd_putc,"T2 "); 
00E78:  MOVLW  54
00E7A:  MOVWF  5B
00E7C:  RCALL  0D0A
00E7E:  MOVLW  32
00E80:  MOVWF  5B
00E82:  RCALL  0D0A
00E84:  MOVLW  20
00E86:  MOVWF  5B
00E88:  RCALL  0D0A
....................         break; 
00E8A:  BRA    0EF2
....................         //neu la thu 3 
....................         case 3: 
....................             printf(lcd_putc,"T3 "); 
00E8C:  MOVLW  54
00E8E:  MOVWF  5B
00E90:  RCALL  0D0A
00E92:  MOVLW  33
00E94:  MOVWF  5B
00E96:  RCALL  0D0A
00E98:  MOVLW  20
00E9A:  MOVWF  5B
00E9C:  RCALL  0D0A
....................         break;  
00E9E:  BRA    0EF2
....................         // neu la thu 4 
....................         case 4: 
....................             printf(lcd_putc,"T4 "); 
00EA0:  MOVLW  54
00EA2:  MOVWF  5B
00EA4:  RCALL  0D0A
00EA6:  MOVLW  34
00EA8:  MOVWF  5B
00EAA:  RCALL  0D0A
00EAC:  MOVLW  20
00EAE:  MOVWF  5B
00EB0:  RCALL  0D0A
....................         break;  
00EB2:  BRA    0EF2
....................         // neu la thu 5 
....................         case 5: 
....................             printf(lcd_putc,"T5 "); 
00EB4:  MOVLW  54
00EB6:  MOVWF  5B
00EB8:  RCALL  0D0A
00EBA:  MOVLW  35
00EBC:  MOVWF  5B
00EBE:  RCALL  0D0A
00EC0:  MOVLW  20
00EC2:  MOVWF  5B
00EC4:  RCALL  0D0A
....................         break;  
00EC6:  BRA    0EF2
....................         // neu la thu 6 
....................         case 6: 
....................             printf(lcd_putc,"T6 "); 
00EC8:  MOVLW  54
00ECA:  MOVWF  5B
00ECC:  RCALL  0D0A
00ECE:  MOVLW  36
00ED0:  MOVWF  5B
00ED2:  RCALL  0D0A
00ED4:  MOVLW  20
00ED6:  MOVWF  5B
00ED8:  RCALL  0D0A
....................         break;  
00EDA:  BRA    0EF2
....................         // neu la thu 7 
....................         case 7: 
....................             printf(lcd_putc,"T7 "); 
00EDC:  MOVLW  54
00EDE:  MOVWF  5B
00EE0:  RCALL  0D0A
00EE2:  MOVLW  37
00EE4:  MOVWF  5B
00EE6:  RCALL  0D0A
00EE8:  MOVLW  20
00EEA:  MOVWF  5B
00EEC:  RCALL  0D0A
....................         break;  
00EEE:  BRA    0EF2
....................         // neu khong co truong hop nao thi out 
....................         default:  
....................         break; 
00EF0:  BRA    0EF2
....................     } 
....................     put_time(date,7,3); 
00EF2:  MOVFF  20,56
00EF6:  MOVLW  07
00EF8:  MOVWF  57
00EFA:  MOVLW  03
00EFC:  MOVWF  58
00EFE:  RCALL  0D74
....................     lcd_putc('-'); 
00F00:  MOVLW  2D
00F02:  MOVWF  5B
00F04:  RCALL  0D0A
....................     put_time(month,10,3); 
00F06:  MOVFF  21,56
00F0A:  MOVLW  0A
00F0C:  MOVWF  57
00F0E:  MOVLW  03
00F10:  MOVWF  58
00F12:  RCALL  0D74
....................     lcd_putc('-'); 
00F14:  MOVLW  2D
00F16:  MOVWF  5B
00F18:  RCALL  0D0A
....................     lcd_gotoxy(13,3);    
00F1A:  MOVLW  0D
00F1C:  MOVWF  5C
00F1E:  MOVLW  03
00F20:  MOVWF  5D
00F22:  RCALL  0CC8
....................     printf(lcd_putc,"20      ");  
00F24:  MOVLW  DA
00F26:  MOVWF  FF6
00F28:  MOVLW  00
00F2A:  MOVWF  FF7
00F2C:  RCALL  0D54
....................     put_time(year,15,3); 
00F2E:  MOVFF  22,56
00F32:  MOVLW  0F
00F34:  MOVWF  57
00F36:  MOVLW  03
00F38:  MOVWF  58
00F3A:  RCALL  0D74
.................... } 
00F3C:  RETURN 0
....................  
.................... //----------------------------------------------------------------------------------- 
.................... //void put_data_info : hien thi thong tin thu ngay thang tren lcd 
.................... //input: gia tri gio phut giay 
.................... //output: none 
.................... void put_time_info() 
.................... { 
....................     lcd_gotoxy(1,2); 
*
00DC8:  MOVLW  01
00DCA:  MOVWF  5C
00DCC:  MOVLW  02
00DCE:  MOVWF  5D
00DD0:  RCALL  0CC8
....................     printf(lcd_putc,"      "); 
00DD2:  MOVLW  E4
00DD4:  MOVWF  FF6
00DD6:  MOVLW  00
00DD8:  MOVWF  FF7
00DDA:  RCALL  0D54
....................     put_time(hour,7,2);  
00DDC:  MOVFF  1E,56
00DE0:  MOVLW  07
00DE2:  MOVWF  57
00DE4:  MOVLW  02
00DE6:  MOVWF  58
00DE8:  RCALL  0D74
....................     lcd_putc(':'); 
00DEA:  MOVLW  3A
00DEC:  MOVWF  5B
00DEE:  RCALL  0D0A
....................     put_time(minute,10,2); 
00DF0:  MOVFF  1D,56
00DF4:  MOVLW  0A
00DF6:  MOVWF  57
00DF8:  MOVLW  02
00DFA:  MOVWF  58
00DFC:  RCALL  0D74
....................     lcd_putc(':'); 
00DFE:  MOVLW  3A
00E00:  MOVWF  5B
00E02:  RCALL  0D0A
....................     put_time(second,13,2); 
00E04:  MOVFF  1C,56
00E08:  MOVLW  0D
00E0A:  MOVWF  57
00E0C:  MOVLW  02
00E0E:  MOVWF  58
00E10:  RCALL  0D74
....................     lcd_gotoxy(15,2); 
00E12:  MOVLW  0F
00E14:  MOVWF  5C
00E16:  MOVLW  02
00E18:  MOVWF  5D
00E1A:  RCALL  0CC8
....................     printf(lcd_putc,"      "); 
00E1C:  MOVLW  EC
00E1E:  MOVWF  FF6
00E20:  MOVLW  00
00E22:  MOVWF  FF7
00E24:  RCALL  0D54
.................... } 
00E26:  RETURN 0
....................  
.................... //------------------------------------------------------------------------------------    
.................... // hien thi trang thai nhap nhay tren lcd 
.................... void lcd_blink_on() 
.................... { 
....................     lcd_putc(' ');  //B0D 1101 
*
01086:  MOVLW  20
01088:  MOVWF  5B
0108A:  RCALL  0D0A
....................     lcd_putc(' ');  //B0D 1101 
0108C:  MOVLW  20
0108E:  MOVWF  5B
01090:  RCALL  0D0A
....................     delay_ms(100); 
01092:  MOVLW  64
01094:  MOVWF  5C
01096:  CALL   0860
.................... } 
0109A:  RETURN 0
....................  
.................... //---------------------------------------------------------------------------------- 
.................... // hien thi trang thai nhap nhay(tat nhap nhay) 
.................... void lcd_blink_off() 
.................... { 
....................     lcd_putc(0x0C); 
....................     delay_us(1); 
.................... } 
.................... // ================================================================================= 
.................... // ham thuc hien chuong trinh chay cho mode 2  
.................... // su dung timer de hien thi thoi gian led lcd 
.................... void set_time() 
.................... { 
....................     // gia tri gio da duoc doc ra gio hien thi len lcd 
....................    if(state_settime)// dung de hien thi 1 lan duy nhat 
*
011A6:  MOVF   27,F
011A8:  BZ    1228
....................    { 
....................         lcd_gotoxy(1,2); 
011AA:  MOVLW  01
011AC:  MOVWF  5C
011AE:  MOVLW  02
011B0:  MOVWF  5D
011B2:  RCALL  0CC8
....................         printf(lcd_putc,"Setup time          "); 
011B4:  MOVLW  F4
011B6:  MOVWF  FF6
011B8:  MOVLW  00
011BA:  MOVWF  FF7
011BC:  RCALL  0D54
....................         lcd_gotoxy(1,3); 
011BE:  MOVLW  01
011C0:  MOVWF  5C
011C2:  MOVLW  03
011C4:  MOVWF  5D
011C6:  RCALL  0CC8
....................         printf(lcd_putc,"                    ");   
011C8:  MOVLW  0A
011CA:  MOVWF  FF6
011CC:  MOVLW  01
011CE:  MOVWF  FF7
011D0:  RCALL  0D54
....................         lcd_gotoxy(1,4); 
011D2:  MOVLW  01
011D4:  MOVWF  5C
011D6:  MOVLW  04
011D8:  MOVWF  5D
011DA:  RCALL  0CC8
....................         printf(lcd_putc,"                    ");  
011DC:  MOVLW  20
011DE:  MOVWF  FF6
011E0:  MOVLW  01
011E2:  MOVWF  FF7
011E4:  RCALL  0D54
....................         // hien thi gia tri thoi gian ra lcd    
....................         put_time(hour,5,3); 
011E6:  MOVFF  1E,56
011EA:  MOVLW  05
011EC:  MOVWF  57
011EE:  MOVLW  03
011F0:  MOVWF  58
011F2:  RCALL  0D74
....................         lcd_putc(":"); 
011F4:  MOVLW  36
011F6:  MOVWF  FF6
011F8:  MOVLW  01
011FA:  MOVWF  FF7
011FC:  RCALL  0D54
....................         put_time(minute,8,3); 
011FE:  MOVFF  1D,56
01202:  MOVLW  08
01204:  MOVWF  57
01206:  MOVLW  03
01208:  MOVWF  58
0120A:  RCALL  0D74
....................         lcd_putc(":"); 
0120C:  MOVLW  38
0120E:  MOVWF  FF6
01210:  MOVLW  01
01212:  MOVWF  FF7
01214:  RCALL  0D54
....................         put_time(second,11,3);  
01216:  MOVFF  1C,56
0121A:  MOVLW  0B
0121C:  MOVWF  57
0121E:  MOVLW  03
01220:  MOVWF  58
01222:  RCALL  0D74
....................         // duoc set lai bang 1 khi chuuyen che do setup 
....................         state_settime=0; 
01224:  CLRF   27
....................         set_flag_mode2=0; 
01226:  CLRF   28
....................    }   
....................     
....................    // khi nut menu duoc bam chuyen cac che do hoat dong trong mode 2 
....................    if(!SET_BTN) 
01228:  BTFSC  F81.0
0122A:  BRA    1262
....................    { 
....................       // bat loa len tao xung o chan loa 
....................       Speaker = 1; 
0122C:  BSF    F8B.0
....................       delay_ms(150); 
0122E:  MOVLW  96
01230:  MOVWF  5C
01232:  CALL   0860
....................       Speaker = 0; 
01236:  BCF    F8B.0
....................       delay_ms(150);  
01238:  MOVLW  96
0123A:  MOVWF  5C
0123C:  CALL   0860
....................       // cho den khi nut duoc nha ra 
....................       while(!SET_BTN); 
01240:  BTFSS  F81.0
01242:  BRA    1240
....................       //tang bien chuyen che do 
....................       set_flag_mode2++; 
01244:  INCF   28,F
....................       if(set_flag_mode2==5)         
01246:  MOVF   28,W
01248:  SUBLW  05
0124A:  BNZ   1262
....................       { 
....................          set_flag_mode2=0; 
0124C:  CLRF   28
....................          // xoa dong stored di 
....................          lcd_gotoxy(1,4); 
0124E:  MOVLW  01
01250:  MOVWF  5C
01252:  MOVLW  04
01254:  MOVWF  5D
01256:  RCALL  0CC8
....................          printf(lcd_putc,"                    ");       
01258:  MOVLW  3A
0125A:  MOVWF  FF6
0125C:  MOVLW  01
0125E:  MOVWF  FF7
01260:  RCALL  0D54
....................       } 
....................    }  
....................    // su ly cac trang thai co. setup thoi gian thuc   
....................    switch(set_flag_mode2) 
....................    { 
01262:  MOVF   28,W
01264:  BZ    1276
01266:  XORLW  01
01268:  BZ    12DE
0126A:  XORLW  03
0126C:  BZ    1346
0126E:  XORLW  01
01270:  BTFSC  FD8.2
01272:  BRA    13AE
01274:  BRA    1402
....................       // de do trang thai nhap nhay tai vi tri cua giay. 
....................       // neu an nut tang giam thi se thay doi gia tri giay 
....................       case 0:   
....................       {     
....................          lcd_gotoxy(11,3);  
01276:  MOVLW  0B
01278:  MOVWF  5C
0127A:  MOVLW  03
0127C:  MOVWF  5D
0127E:  RCALL  0CC8
....................          lcd_blink_on();  
01280:  RCALL  1086
....................          //delay_ms(10); 
....................          put_time(second,11,3); 
01282:  MOVFF  1C,56
01286:  MOVLW  0B
01288:  MOVWF  57
0128A:  MOVLW  03
0128C:  MOVWF  58
0128E:  RCALL  0D74
....................          delay_ms(100); 
01290:  MOVLW  64
01292:  MOVWF  5C
01294:  CALL   0860
....................          if(!UP_BTN)          //neu bam nut sub-------- 
01298:  BTFSC  F81.2
0129A:  BRA    12BA
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0129C:  BSF    F8B.0
....................             delay_ms(150); 
0129E:  MOVLW  96
012A0:  MOVWF  5C
012A2:  CALL   0860
....................             Speaker = 0; 
012A6:  BCF    F8B.0
....................             delay_ms(150);  
012A8:  MOVLW  96
012AA:  MOVWF  5C
012AC:  CALL   0860
....................             second++; 
012B0:  INCF   1C,F
....................             if(second==60)        second=0;  
012B2:  MOVF   1C,W
012B4:  SUBLW  3C
012B6:  BTFSC  FD8.2
012B8:  CLRF   1C
....................             // hien thi len lcd    
....................             //put_time(second,11,3); 
....................          }  
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
012BA:  BTFSC  F81.1
012BC:  BRA    12DC
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
012BE:  BSF    F8B.0
....................             delay_ms(150); 
012C0:  MOVLW  96
012C2:  MOVWF  5C
012C4:  CALL   0860
....................             Speaker = 0; 
012C8:  BCF    F8B.0
....................             delay_ms(150);  
012CA:  MOVLW  96
012CC:  MOVWF  5C
012CE:  CALL   0860
....................             second--; 
012D2:  DECF   1C,F
....................             if(second==255)        second=59;  
012D4:  INCFSZ 1C,W
012D6:  BRA    12DC
012D8:  MOVLW  3B
012DA:  MOVWF  1C
....................             // hien thi len lcd 
....................             //put_time(second,11,3); 
....................              
....................          }  
....................       }  
....................       break; 
012DC:  BRA    1404
....................       // neu an nut tang giam thi se thay doi gia tri phut 
....................       case 1:              
....................       { 
....................          lcd_gotoxy(8,3);  
012DE:  MOVLW  08
012E0:  MOVWF  5C
012E2:  MOVLW  03
012E4:  MOVWF  5D
012E6:  RCALL  0CC8
....................          lcd_blink_on();  
012E8:  RCALL  1086
....................          put_time(minute,8,3); 
012EA:  MOVFF  1D,56
012EE:  MOVLW  08
012F0:  MOVWF  57
012F2:  MOVLW  03
012F4:  MOVWF  58
012F6:  RCALL  0D74
....................          delay_ms(100); 
012F8:  MOVLW  64
012FA:  MOVWF  5C
012FC:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
01300:  BTFSC  F81.2
01302:  BRA    1322
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01304:  BSF    F8B.0
....................             delay_ms(150); 
01306:  MOVLW  96
01308:  MOVWF  5C
0130A:  CALL   0860
....................             Speaker = 0; 
0130E:  BCF    F8B.0
....................             delay_ms(150); 
01310:  MOVLW  96
01312:  MOVWF  5C
01314:  CALL   0860
....................             minute++; 
01318:  INCF   1D,F
....................             if(minute==60)    minute=0;  
0131A:  MOVF   1D,W
0131C:  SUBLW  3C
0131E:  BTFSC  FD8.2
01320:  CLRF   1D
....................            // put_time(minute,8,3);  
....................           } 
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
01322:  BTFSC  F81.1
01324:  BRA    1344
....................          { 
....................                     //cho toi khi tha nut bam 
....................             Speaker = 1; 
01326:  BSF    F8B.0
....................             delay_ms(150); 
01328:  MOVLW  96
0132A:  MOVWF  5C
0132C:  CALL   0860
....................             Speaker = 0; 
01330:  BCF    F8B.0
....................             delay_ms(150); 
01332:  MOVLW  96
01334:  MOVWF  5C
01336:  CALL   0860
....................             minute--; 
0133A:  DECF   1D,F
....................             if(minute==255)   minute=59; 
0133C:  INCFSZ 1D,W
0133E:  BRA    1344
01340:  MOVLW  3B
01342:  MOVWF  1D
....................            // put_time(minute,8,3); 
....................          } 
....................      } 
....................       break; 
01344:  BRA    1404
....................       // neu an nut tang giam thi se thay doi gia tri gio 
....................       case 2:             //set minute 
....................       {     
....................          lcd_gotoxy(5,3);  
01346:  MOVLW  05
01348:  MOVWF  5C
0134A:  MOVLW  03
0134C:  MOVWF  5D
0134E:  RCALL  0CC8
....................          lcd_blink_on();  
01350:  RCALL  1086
....................          put_time(hour,5,3); 
01352:  MOVFF  1E,56
01356:  MOVLW  05
01358:  MOVWF  57
0135A:  MOVLW  03
0135C:  MOVWF  58
0135E:  RCALL  0D74
....................          delay_ms(100); 
01360:  MOVLW  64
01362:  MOVWF  5C
01364:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
01368:  BTFSC  F81.2
0136A:  BRA    138A
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0136C:  BSF    F8B.0
....................             delay_ms(150); 
0136E:  MOVLW  96
01370:  MOVWF  5C
01372:  CALL   0860
....................             Speaker = 0; 
01376:  BCF    F8B.0
....................             delay_ms(150); 
01378:  MOVLW  96
0137A:  MOVWF  5C
0137C:  CALL   0860
....................             hour++; 
01380:  INCF   1E,F
....................             if(hour==24)   hour=0;    
01382:  MOVF   1E,W
01384:  SUBLW  18
01386:  BTFSC  FD8.2
01388:  CLRF   1E
....................             //put_time(hour,5,3);  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
0138A:  BTFSC  F81.1
0138C:  BRA    13AC
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0138E:  BSF    F8B.0
....................             delay_ms(150); 
01390:  MOVLW  96
01392:  MOVWF  5C
01394:  CALL   0860
....................             Speaker = 0; 
01398:  BCF    F8B.0
....................             delay_ms(150); 
0139A:  MOVLW  96
0139C:  MOVWF  5C
0139E:  CALL   0860
....................             hour--; 
013A2:  DECF   1E,F
....................             if(hour==255)   hour=23;    
013A4:  INCFSZ 1E,W
013A6:  BRA    13AC
013A8:  MOVLW  17
013AA:  MOVWF  1E
....................             //put_time(hour,5,3);  
....................          } 
....................        } 
....................       break; 
013AC:  BRA    1404
....................       // luu gia tri setup vao ds1307 
....................       case 3:             
....................       { 
....................          //lcd_blink_off();  
....................          lcd_gotoxy(1,4); 
013AE:  MOVLW  01
013B0:  MOVWF  5C
013B2:  MOVLW  04
013B4:  MOVWF  5D
013B6:  RCALL  0CC8
....................          printf(lcd_putc,">Stored       "); 
013B8:  MOVLW  50
013BA:  MOVWF  FF6
013BC:  MOVLW  01
013BE:  MOVWF  FF7
013C0:  RCALL  0D54
....................          set_flag_mode2=4; 
013C2:  MOVLW  04
013C4:  MOVWF  28
....................          write_DS1307(0x00,bin2bcd(second)); 
013C6:  MOVFF  1C,53
013CA:  RCALL  109C
013CC:  MOVFF  01,53
013D0:  CLRF   54
013D2:  MOVFF  01,55
013D6:  RCALL  10DC
....................          write_DS1307(0x01,bin2bcd(minute)); 
013D8:  MOVFF  1D,53
013DC:  RCALL  109C
013DE:  MOVFF  01,53
013E2:  MOVLW  01
013E4:  MOVWF  54
013E6:  MOVFF  01,55
013EA:  RCALL  10DC
....................          write_DS1307(0x02,bin2bcd(hour)); 
013EC:  MOVFF  1E,53
013F0:  RCALL  109C
013F2:  MOVFF  01,53
013F6:  MOVLW  02
013F8:  MOVWF  54
013FA:  MOVFF  01,55
013FE:  RCALL  10DC
....................          // luu gia tri vao ds 1307 
....................       } 
....................       break; 
01400:  BRA    1404
....................       //  
....................       default: 
....................       break; 
01402:  BRA    1404
....................    } 
.................... } 
01404:  GOTO   2546 (RETURN)
.................... // ham dung set date 
.................... void set_date() 
.................... { 
....................     // gia tri gio da duoc doc ra gio hien thi len lcd 
....................    if(state_settime)// dung de hien thi 1 lan duy nhat 
01408:  MOVF   27,F
0140A:  BZ    144E
....................    { 
....................         lcd_gotoxy(1,2); 
0140C:  MOVLW  01
0140E:  MOVWF  5C
01410:  MOVLW  02
01412:  MOVWF  5D
01414:  RCALL  0CC8
....................         printf(lcd_putc,"Setup date          "); 
01416:  MOVLW  60
01418:  MOVWF  FF6
0141A:  MOVLW  01
0141C:  MOVWF  FF7
0141E:  RCALL  0D54
....................         lcd_gotoxy(1,3); 
01420:  MOVLW  01
01422:  MOVWF  5C
01424:  MOVLW  03
01426:  MOVWF  5D
01428:  RCALL  0CC8
....................         printf(lcd_putc,"                    ");   
0142A:  MOVLW  76
0142C:  MOVWF  FF6
0142E:  MOVLW  01
01430:  MOVWF  FF7
01432:  RCALL  0D54
....................         lcd_gotoxy(1,4); 
01434:  MOVLW  01
01436:  MOVWF  5C
01438:  MOVLW  04
0143A:  MOVWF  5D
0143C:  RCALL  0CC8
....................         printf(lcd_putc,"                    ");  
0143E:  MOVLW  8C
01440:  MOVWF  FF6
01442:  MOVLW  01
01444:  MOVWF  FF7
01446:  RCALL  0D54
....................         put_date_info();  
01448:  RCALL  0E28
....................         // duoc set lai bang 1 khi chuuyen che do setup 
....................         state_settime=0; 
0144A:  CLRF   27
....................         set_flag_mode2=0; 
0144C:  CLRF   28
....................    }   
....................     
....................    // khi nut menu duoc bam chuyen cac che do hoat dong trong mode 2 
....................    if(!SET_BTN) 
0144E:  BTFSC  F81.0
01450:  BRA    1488
....................    { 
....................       // bat loa len tao xung o chan loa 
....................       Speaker = 1; 
01452:  BSF    F8B.0
....................       delay_ms(150); 
01454:  MOVLW  96
01456:  MOVWF  5C
01458:  CALL   0860
....................       Speaker = 0; 
0145C:  BCF    F8B.0
....................       delay_ms(150);  
0145E:  MOVLW  96
01460:  MOVWF  5C
01462:  CALL   0860
....................       // cho den khi nut duoc nha ra 
....................       while(!SET_BTN); 
01466:  BTFSS  F81.0
01468:  BRA    1466
....................       //tang bien chuyen che do 
....................       set_flag_mode2++; 
0146A:  INCF   28,F
....................       if(set_flag_mode2==6)         
0146C:  MOVF   28,W
0146E:  SUBLW  06
01470:  BNZ   1488
....................          { 
....................             set_flag_mode2=0; 
01472:  CLRF   28
....................             // xoa dong stored di 
....................             lcd_gotoxy(1,4); 
01474:  MOVLW  01
01476:  MOVWF  5C
01478:  MOVLW  04
0147A:  MOVWF  5D
0147C:  RCALL  0CC8
....................             printf(lcd_putc,"                  "); 
0147E:  MOVLW  A2
01480:  MOVWF  FF6
01482:  MOVLW  01
01484:  MOVWF  FF7
01486:  RCALL  0D54
....................              
....................          } 
....................    }  
....................    // su ly cac trang thai co. setup thoi gian thuc   
....................    switch(set_flag_mode2) 
....................    { 
01488:  MOVF   28,W
0148A:  BZ    14A4
0148C:  XORLW  01
0148E:  BZ    150E
01490:  XORLW  03
01492:  BTFSC  FD8.2
01494:  BRA    157A
01496:  XORLW  01
01498:  BTFSC  FD8.2
0149A:  BRA    15E6
0149C:  XORLW  07
0149E:  BTFSC  FD8.2
014A0:  BRA    1646
014A2:  BRA    16B4
....................       // de do trang thai nhap nhay tai vi tri cua giay. 
....................       // neu an nut tang giam thi se thay doi gia tri giay 
....................       case 0:   
....................       {     
....................          lcd_gotoxy(10,3);  
014A4:  MOVLW  0A
014A6:  MOVWF  5C
014A8:  MOVLW  03
014AA:  MOVWF  5D
014AC:  RCALL  0CC8
....................          lcd_blink_on();  
014AE:  RCALL  1086
....................          put_time(month,10,3); 
014B0:  MOVFF  21,56
014B4:  MOVLW  0A
014B6:  MOVWF  57
014B8:  MOVLW  03
014BA:  MOVWF  58
014BC:  RCALL  0D74
....................          delay_ms(100); 
014BE:  MOVLW  64
014C0:  MOVWF  5C
014C2:  CALL   0860
....................           
....................          if(!UP_BTN)          //neu bam nut sub-------- 
014C6:  BTFSC  F81.2
014C8:  BRA    14EA
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
014CA:  BSF    F8B.0
....................             delay_ms(150); 
014CC:  MOVLW  96
014CE:  MOVWF  5C
014D0:  CALL   0860
....................             Speaker = 0; 
014D4:  BCF    F8B.0
....................             delay_ms(150);  
014D6:  MOVLW  96
014D8:  MOVWF  5C
014DA:  CALL   0860
....................             month++; 
014DE:  INCF   21,F
....................             if(month==13)        month=1;  
014E0:  MOVF   21,W
014E2:  SUBLW  0D
014E4:  BNZ   14EA
014E6:  MOVLW  01
014E8:  MOVWF  21
....................             // hien thi len lcd 
....................             //put_time(month,10,3); 
....................              
....................          }  
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
014EA:  BTFSC  F81.1
014EC:  BRA    150C
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
014EE:  BSF    F8B.0
....................             delay_ms(150); 
014F0:  MOVLW  96
014F2:  MOVWF  5C
014F4:  CALL   0860
....................             Speaker = 0; 
014F8:  BCF    F8B.0
....................             delay_ms(150);  
014FA:  MOVLW  96
014FC:  MOVWF  5C
014FE:  CALL   0860
....................             month--; 
01502:  DECF   21,F
....................             if(month==0)        month=12;  
01504:  MOVF   21,F
01506:  BNZ   150C
01508:  MOVLW  0C
0150A:  MOVWF  21
....................             // hien thi len lcd 
....................             //put_time(month,10,3); 
....................              
....................          }  
....................       }  
....................       break; 
0150C:  BRA    16B6
....................       // neu an nut tang giam thi se thay doi gia tri phut 
....................       case 1:              
....................       { 
....................          lcd_gotoxy(7,3);  
0150E:  MOVLW  07
01510:  MOVWF  5C
01512:  MOVLW  03
01514:  MOVWF  5D
01516:  CALL   0CC8
....................          lcd_blink_on();  
0151A:  RCALL  1086
....................          put_time(date,7,3);  
0151C:  MOVFF  20,56
01520:  MOVLW  07
01522:  MOVWF  57
01524:  MOVLW  03
01526:  MOVWF  58
01528:  RCALL  0D74
....................          delay_ms(100); 
0152A:  MOVLW  64
0152C:  MOVWF  5C
0152E:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
01532:  BTFSC  F81.2
01534:  BRA    1556
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01536:  BSF    F8B.0
....................             delay_ms(150); 
01538:  MOVLW  96
0153A:  MOVWF  5C
0153C:  CALL   0860
....................             Speaker = 0; 
01540:  BCF    F8B.0
....................             delay_ms(150); 
01542:  MOVLW  96
01544:  MOVWF  5C
01546:  CALL   0860
....................             date++; 
0154A:  INCF   20,F
....................             if(date==32)    date=1;  
0154C:  MOVF   20,W
0154E:  SUBLW  20
01550:  BNZ   1556
01552:  MOVLW  01
01554:  MOVWF  20
....................             //put_time(date,7,3);  
....................           } 
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
01556:  BTFSC  F81.1
01558:  BRA    1578
....................          { 
....................                     //cho toi khi tha nut bam 
....................             Speaker = 1; 
0155A:  BSF    F8B.0
....................             delay_ms(150); 
0155C:  MOVLW  96
0155E:  MOVWF  5C
01560:  CALL   0860
....................             Speaker = 0; 
01564:  BCF    F8B.0
....................             delay_ms(150); 
01566:  MOVLW  96
01568:  MOVWF  5C
0156A:  CALL   0860
....................             date--; 
0156E:  DECF   20,F
....................             if(date==0)   date=31; 
01570:  MOVF   20,F
01572:  BNZ   1578
01574:  MOVLW  1F
01576:  MOVWF  20
....................             //put_time(date,7,3); 
....................          } 
....................      } 
....................       break; 
01578:  BRA    16B6
....................       // neu an nut tang giam thi se thay doi gia tri gio 
....................       case 2:             //set minute 
....................       {     
....................          lcd_gotoxy(15,3);  
0157A:  MOVLW  0F
0157C:  MOVWF  5C
0157E:  MOVLW  03
01580:  MOVWF  5D
01582:  CALL   0CC8
....................          lcd_blink_on();  
01586:  RCALL  1086
....................          put_time(year,15,3); 
01588:  MOVFF  22,56
0158C:  MOVLW  0F
0158E:  MOVWF  57
01590:  MOVLW  03
01592:  MOVWF  58
01594:  CALL   0D74
....................          delay_ms(100); 
01598:  MOVLW  64
0159A:  MOVWF  5C
0159C:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
015A0:  BTFSC  F81.2
015A2:  BRA    15C2
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
015A4:  BSF    F8B.0
....................             delay_ms(150); 
015A6:  MOVLW  96
015A8:  MOVWF  5C
015AA:  CALL   0860
....................             Speaker = 0; 
015AE:  BCF    F8B.0
....................             delay_ms(150); 
015B0:  MOVLW  96
015B2:  MOVWF  5C
015B4:  CALL   0860
....................             year++; 
015B8:  INCF   22,F
....................             if(year==100)   year=0; 
015BA:  MOVF   22,W
015BC:  SUBLW  64
015BE:  BTFSC  FD8.2
015C0:  CLRF   22
....................            // put_time(year,15,3);  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
015C2:  BTFSC  F81.1
015C4:  BRA    15E4
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
015C6:  BSF    F8B.0
....................             delay_ms(150); 
015C8:  MOVLW  96
015CA:  MOVWF  5C
015CC:  CALL   0860
....................             Speaker = 0; 
015D0:  BCF    F8B.0
....................             delay_ms(150); 
015D2:  MOVLW  96
015D4:  MOVWF  5C
015D6:  CALL   0860
....................             year--; 
015DA:  DECF   22,F
....................             if(year==255)   year=99;    
015DC:  INCFSZ 22,W
015DE:  BRA    15E4
015E0:  MOVLW  63
015E2:  MOVWF  22
....................            // put_time(hour,15,3);  
....................          } 
....................        } 
....................       break; 
015E4:  BRA    16B6
....................       // neu an nut tang giam thi se thay doi gia tri gio 
....................       case 3:             //set minute 
....................       {     
....................          lcd_gotoxy(4,3);  
015E6:  MOVLW  04
015E8:  MOVWF  5C
015EA:  MOVLW  03
015EC:  MOVWF  5D
015EE:  CALL   0CC8
....................          lcd_blink_on();   
015F2:  RCALL  1086
....................          put_date_info(); 
015F4:  RCALL  0E28
....................          delay_ms(100); 
015F6:  MOVLW  64
015F8:  MOVWF  5C
015FA:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
015FE:  BTFSC  F81.2
01600:  BRA    1622
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01602:  BSF    F8B.0
....................             delay_ms(150); 
01604:  MOVLW  96
01606:  MOVWF  5C
01608:  CALL   0860
....................             Speaker = 0; 
0160C:  BCF    F8B.0
....................             delay_ms(150); 
0160E:  MOVLW  96
01610:  MOVWF  5C
01612:  CALL   0860
....................             day++; 
01616:  INCF   1F,F
....................             if(day==8)   day=1;    
01618:  MOVF   1F,W
0161A:  SUBLW  08
0161C:  BNZ   1622
0161E:  MOVLW  01
01620:  MOVWF  1F
....................             //put_date_info();  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
01622:  BTFSC  F81.1
01624:  BRA    1644
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01626:  BSF    F8B.0
....................             delay_ms(150); 
01628:  MOVLW  96
0162A:  MOVWF  5C
0162C:  CALL   0860
....................             Speaker = 0; 
01630:  BCF    F8B.0
....................             delay_ms(150); 
01632:  MOVLW  96
01634:  MOVWF  5C
01636:  CALL   0860
....................             day--; 
0163A:  DECF   1F,F
....................             if(day==0)   day=7;    
0163C:  MOVF   1F,F
0163E:  BNZ   1644
01640:  MOVLW  07
01642:  MOVWF  1F
....................             //put_date_info();  
....................          } 
....................        } 
....................       break; 
01644:  BRA    16B6
....................       // luu gia tri setup vao ds1307 
....................       case 4:             
....................       { 
....................          //lcd_blink_off();  
....................          lcd_gotoxy(1,4); 
01646:  MOVLW  01
01648:  MOVWF  5C
0164A:  MOVLW  04
0164C:  MOVWF  5D
0164E:  CALL   0CC8
....................          printf(lcd_putc,">Stored       "); 
01652:  MOVLW  B6
01654:  MOVWF  FF6
01656:  MOVLW  01
01658:  MOVWF  FF7
0165A:  CALL   0D54
....................          // luu gia tri vao ds 1307 
....................          write_DS1307(0x03,bin2bcd(day)); 
0165E:  MOVFF  1F,53
01662:  RCALL  109C
01664:  MOVFF  01,53
01668:  MOVLW  03
0166A:  MOVWF  54
0166C:  MOVFF  01,55
01670:  RCALL  10DC
....................          write_DS1307(0x04,bin2bcd(date)); 
01672:  MOVFF  20,53
01676:  RCALL  109C
01678:  MOVFF  01,53
0167C:  MOVLW  04
0167E:  MOVWF  54
01680:  MOVFF  01,55
01684:  RCALL  10DC
....................          write_DS1307(0x05,bin2bcd(month)); 
01686:  MOVFF  21,53
0168A:  RCALL  109C
0168C:  MOVFF  01,53
01690:  MOVLW  05
01692:  MOVWF  54
01694:  MOVFF  01,55
01698:  RCALL  10DC
....................          write_DS1307(0x06,bin2bcd(year)); 
0169A:  MOVFF  22,53
0169E:  RCALL  109C
016A0:  MOVFF  01,53
016A4:  MOVLW  06
016A6:  MOVWF  54
016A8:  MOVFF  01,55
016AC:  RCALL  10DC
....................          set_flag_mode2=5; 
016AE:  MOVLW  05
016B0:  MOVWF  28
....................       } 
....................       break; 
016B2:  BRA    16B6
....................       //  
....................       default: 
....................       break; 
016B4:  BRA    16B6
....................    } 
.................... } 
016B6:  GOTO   254C (RETURN)
....................  
.................... // ham set thoi gian on off cho may bom-> che do 2 (dieu khien bom) 
.................... // ham nay duoc goi khi dang o che do 2 con o cac che do khac 
.................... // ham nay khong duoc goi den 
.................... void set_time_on_off() 
.................... { 
....................     // gia tri gio da duoc doc ra gio hien thi len lcd 
....................    if(state_settime)// dung de hien thi 1 lan duy nhat 
*
019B4:  MOVF   27,F
019B6:  BTFSC  FD8.2
019B8:  BRA    1B02
....................    { 
....................         lcd_gotoxy(1,2); 
019BA:  MOVLW  01
019BC:  MOVWF  5C
019BE:  MOVLW  02
019C0:  MOVWF  5D
019C2:  CALL   0CC8
....................         printf(lcd_putc,"Thoi gian bom       "); 
019C6:  MOVLW  C6
019C8:  MOVWF  FF6
019CA:  MOVLW  01
019CC:  MOVWF  FF7
019CE:  CALL   0D54
....................         lcd_gotoxy(1,3); 
019D2:  MOVLW  01
019D4:  MOVWF  5C
019D6:  MOVLW  03
019D8:  MOVWF  5D
019DA:  CALL   0CC8
....................         printf(lcd_putc,"            ON:  h  ");   
019DE:  MOVLW  DC
019E0:  MOVWF  FF6
019E2:  MOVLW  01
019E4:  MOVWF  FF7
019E6:  CALL   0D54
....................         lcd_gotoxy(1,4); 
019EA:  MOVLW  01
019EC:  MOVWF  5C
019EE:  MOVLW  04
019F0:  MOVWF  5D
019F2:  CALL   0CC8
....................         printf(lcd_putc,"            IN:    p");  
019F6:  MOVLW  F2
019F8:  MOVWF  FF6
019FA:  MOVLW  01
019FC:  MOVWF  FF7
019FE:  CALL   0D54
....................         STT_time_on=1; 
01A02:  MOVLW  01
01A04:  MOVWF  29
....................         lcd_gotoxy(15,2); 
01A06:  MOVLW  0F
01A08:  MOVWF  5C
01A0A:  MOVLW  02
01A0C:  MOVWF  5D
01A0E:  CALL   0CC8
....................         printf(lcd_putc,"%u",STT_time_on); 
01A12:  MOVFF  29,53
01A16:  MOVLW  1B
01A18:  MOVWF  54
01A1A:  RCALL  16BA
....................         put_time(DEV_INFO[STT_time_on].hour_on,16,3); 
01A1C:  MOVF   29,W
01A1E:  MULLW  04
01A20:  MOVF   FF3,W
01A22:  CLRF   54
01A24:  MOVWF  53
01A26:  MOVLW  2F
01A28:  ADDWF  53,W
01A2A:  MOVWF  FE9
01A2C:  MOVLW  00
01A2E:  ADDWFC 54,W
01A30:  MOVWF  FEA
01A32:  MOVFF  FEF,55
01A36:  MOVFF  55,56
01A3A:  MOVLW  10
01A3C:  MOVWF  57
01A3E:  MOVLW  03
01A40:  MOVWF  58
01A42:  CALL   0D74
....................         put_time(DEV_INFO[STT_time_on].minute_on,19,3); 
01A46:  MOVF   29,W
01A48:  MULLW  04
01A4A:  MOVF   FF3,W
01A4C:  CLRF   54
01A4E:  MOVWF  53
01A50:  MOVLW  01
01A52:  ADDWF  53,W
01A54:  MOVWF  01
01A56:  MOVLW  00
01A58:  ADDWFC 54,W
01A5A:  MOVWF  03
01A5C:  MOVF   01,W
01A5E:  ADDLW  2F
01A60:  MOVWF  FE9
01A62:  MOVLW  00
01A64:  ADDWFC 03,W
01A66:  MOVWF  FEA
01A68:  MOVFF  FEF,53
01A6C:  MOVFF  53,56
01A70:  MOVLW  13
01A72:  MOVWF  57
01A74:  MOVLW  03
01A76:  MOVWF  58
01A78:  CALL   0D74
....................         put_time(DEV_INFO[STT_time_on].time_on,17,4); 
01A7C:  MOVF   29,W
01A7E:  MULLW  04
01A80:  MOVF   FF3,W
01A82:  CLRF   54
01A84:  MOVWF  53
01A86:  MOVLW  02
01A88:  ADDWF  53,W
01A8A:  MOVWF  01
01A8C:  MOVLW  00
01A8E:  ADDWFC 54,W
01A90:  MOVWF  03
01A92:  MOVF   01,W
01A94:  ADDLW  2F
01A96:  MOVWF  FE9
01A98:  MOVLW  00
01A9A:  ADDWFC 03,W
01A9C:  MOVWF  FEA
01A9E:  MOVFF  FEF,53
01AA2:  MOVFF  53,56
01AA6:  MOVLW  11
01AA8:  MOVWF  57
01AAA:  MOVLW  04
01AAC:  MOVWF  58
01AAE:  CALL   0D74
....................         lcd_gotoxy(1,3); 
01AB2:  MOVLW  01
01AB4:  MOVWF  5C
01AB6:  MOVLW  03
01AB8:  MOVWF  5D
01ABA:  CALL   0CC8
....................         if(DEV_INFO[STT_time_on].state_on==1) 
01ABE:  MOVF   29,W
01AC0:  MULLW  04
01AC2:  MOVF   FF3,W
01AC4:  CLRF   54
01AC6:  MOVWF  53
01AC8:  MOVLW  03
01ACA:  ADDWF  53,W
01ACC:  MOVWF  01
01ACE:  MOVLW  00
01AD0:  ADDWFC 54,W
01AD2:  MOVWF  03
01AD4:  MOVF   01,W
01AD6:  ADDLW  2F
01AD8:  MOVWF  FE9
01ADA:  MOVLW  00
01ADC:  ADDWFC 03,W
01ADE:  MOVWF  FEA
01AE0:  DECFSZ FEF,W
01AE2:  BRA    1AF2
....................            printf(lcd_putc,"Enable "); 
01AE4:  MOVLW  08
01AE6:  MOVWF  FF6
01AE8:  MOVLW  02
01AEA:  MOVWF  FF7
01AEC:  CALL   0D54
....................         else 
01AF0:  BRA    1AFE
....................            printf(lcd_putc,"Disable"); 
01AF2:  MOVLW  10
01AF4:  MOVWF  FF6
01AF6:  MOVLW  02
01AF8:  MOVWF  FF7
01AFA:  CALL   0D54
....................         // duoc set lai bang 1 khi chuuyen che do setup 
....................         state_settime=0; 
01AFE:  CLRF   27
....................         set_flag_mode2=0; 
01B00:  CLRF   28
....................    }   
....................     
....................    // khi nut menu duoc bam chuyen cac che do hoat dong trong mode 2 
....................    if(!SET_BTN) 
01B02:  BTFSC  F81.0
01B04:  BRA    1B40
....................    { 
....................       // bat loa len tao xung o chan loa 
....................       Speaker = 1; 
01B06:  BSF    F8B.0
....................       delay_ms(150); 
01B08:  MOVLW  96
01B0A:  MOVWF  5C
01B0C:  CALL   0860
....................       Speaker = 0; 
01B10:  BCF    F8B.0
....................       delay_ms(150);  
01B12:  MOVLW  96
01B14:  MOVWF  5C
01B16:  CALL   0860
....................       // cho den khi nut duoc nha ra 
....................       while(!SET_BTN); 
01B1A:  BTFSS  F81.0
01B1C:  BRA    1B1A
....................       //tang bien chuyen che do 
....................       set_flag_mode2++; 
01B1E:  INCF   28,F
....................       if(set_flag_mode2==7)         
01B20:  MOVF   28,W
01B22:  SUBLW  07
01B24:  BNZ   1B40
....................          { 
....................             set_flag_mode2=0; 
01B26:  CLRF   28
....................             // xoa dong stored di 
....................             lcd_gotoxy(1,4); 
01B28:  MOVLW  01
01B2A:  MOVWF  5C
01B2C:  MOVLW  04
01B2E:  MOVWF  5D
01B30:  CALL   0CC8
....................             printf(lcd_putc,"       "); 
01B34:  MOVLW  18
01B36:  MOVWF  FF6
01B38:  MOVLW  02
01B3A:  MOVWF  FF7
01B3C:  CALL   0D54
....................              
....................          } 
....................    }  
....................    // su ly cac trang thai co. setup thoi gian thuc   
....................    switch(set_flag_mode2) 
....................    { 
01B40:  MOVF   28,W
01B42:  BZ    1B68
01B44:  XORLW  01
01B46:  BTFSC  FD8.2
01B48:  BRA    1DAE
01B4A:  XORLW  03
01B4C:  BTFSC  FD8.2
01B4E:  BRA    1F70
01B50:  XORLW  01
01B52:  BTFSC  FD8.2
01B54:  BRA    207C
01B56:  XORLW  07
01B58:  BTFSC  FD8.2
01B5A:  BRA    21E6
01B5C:  XORLW  01
01B5E:  BTFSC  FD8.2
01B60:  GOTO   2350
01B64:  GOTO   2460
....................       // de do trang thai nhap nhay tai vi tri cua . 
....................       // neu an nut tang giam thi se thay doi gia tri giay 
....................       case 0:   
....................       { 
....................          lcd_gotoxy(15,2); 
01B68:  MOVLW  0F
01B6A:  MOVWF  5C
01B6C:  MOVLW  02
01B6E:  MOVWF  5D
01B70:  CALL   0CC8
....................          lcd_putc(' '); 
01B74:  MOVLW  20
01B76:  MOVWF  5B
01B78:  CALL   0D0A
....................          delay_ms(100); 
01B7C:  MOVLW  64
01B7E:  MOVWF  5C
01B80:  CALL   0860
....................          lcd_gotoxy(15,2); 
01B84:  MOVLW  0F
01B86:  MOVWF  5C
01B88:  MOVLW  02
01B8A:  MOVWF  5D
01B8C:  CALL   0CC8
....................          printf(lcd_putc,"%u",STT_time_on); 
01B90:  MOVFF  29,53
01B94:  MOVLW  1B
01B96:  MOVWF  54
01B98:  RCALL  16BA
....................          delay_ms(100); 
01B9A:  MOVLW  64
01B9C:  MOVWF  5C
01B9E:  CALL   0860
....................          if(!UP_BTN)          //neu bam nut add-------- 
01BA2:  BTFSC  F81.2
01BA4:  BRA    1CA8
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01BA6:  BSF    F8B.0
....................             delay_ms(150); 
01BA8:  MOVLW  96
01BAA:  MOVWF  5C
01BAC:  CALL   0860
....................             Speaker = 0; 
01BB0:  BCF    F8B.0
....................             delay_ms(150);  
01BB2:  MOVLW  96
01BB4:  MOVWF  5C
01BB6:  CALL   0860
....................             STT_time_on++; 
01BBA:  INCF   29,F
....................             if(STT_time_on==4)        STT_time_on=1;  
01BBC:  MOVF   29,W
01BBE:  SUBLW  04
01BC0:  BNZ   1BC6
01BC2:  MOVLW  01
01BC4:  MOVWF  29
....................             // hien thi thoi gian tuong ung len lcd 
....................             //put_time(STT_time_on,15,2); 
....................             put_time(DEV_INFO[STT_time_on].hour_on,16,3); 
01BC6:  MOVF   29,W
01BC8:  MULLW  04
01BCA:  MOVF   FF3,W
01BCC:  CLRF   54
01BCE:  MOVWF  53
01BD0:  MOVLW  2F
01BD2:  ADDWF  53,W
01BD4:  MOVWF  FE9
01BD6:  MOVLW  00
01BD8:  ADDWFC 54,W
01BDA:  MOVWF  FEA
01BDC:  MOVFF  FEF,55
01BE0:  MOVFF  55,56
01BE4:  MOVLW  10
01BE6:  MOVWF  57
01BE8:  MOVLW  03
01BEA:  MOVWF  58
01BEC:  CALL   0D74
....................             put_time(DEV_INFO[STT_time_on].minute_on,19,3); 
01BF0:  MOVF   29,W
01BF2:  MULLW  04
01BF4:  MOVF   FF3,W
01BF6:  CLRF   54
01BF8:  MOVWF  53
01BFA:  MOVLW  01
01BFC:  ADDWF  53,W
01BFE:  MOVWF  01
01C00:  MOVLW  00
01C02:  ADDWFC 54,W
01C04:  MOVWF  03
01C06:  MOVF   01,W
01C08:  ADDLW  2F
01C0A:  MOVWF  FE9
01C0C:  MOVLW  00
01C0E:  ADDWFC 03,W
01C10:  MOVWF  FEA
01C12:  MOVFF  FEF,53
01C16:  MOVFF  53,56
01C1A:  MOVLW  13
01C1C:  MOVWF  57
01C1E:  MOVLW  03
01C20:  MOVWF  58
01C22:  CALL   0D74
....................             put_time(DEV_INFO[STT_time_on].time_on,17,4); 
01C26:  MOVF   29,W
01C28:  MULLW  04
01C2A:  MOVF   FF3,W
01C2C:  CLRF   54
01C2E:  MOVWF  53
01C30:  MOVLW  02
01C32:  ADDWF  53,W
01C34:  MOVWF  01
01C36:  MOVLW  00
01C38:  ADDWFC 54,W
01C3A:  MOVWF  03
01C3C:  MOVF   01,W
01C3E:  ADDLW  2F
01C40:  MOVWF  FE9
01C42:  MOVLW  00
01C44:  ADDWFC 03,W
01C46:  MOVWF  FEA
01C48:  MOVFF  FEF,53
01C4C:  MOVFF  53,56
01C50:  MOVLW  11
01C52:  MOVWF  57
01C54:  MOVLW  04
01C56:  MOVWF  58
01C58:  CALL   0D74
....................             lcd_gotoxy(1,3); 
01C5C:  MOVLW  01
01C5E:  MOVWF  5C
01C60:  MOVLW  03
01C62:  MOVWF  5D
01C64:  CALL   0CC8
....................             if(DEV_INFO[STT_time_on].state_on==1) 
01C68:  MOVF   29,W
01C6A:  MULLW  04
01C6C:  MOVF   FF3,W
01C6E:  CLRF   54
01C70:  MOVWF  53
01C72:  MOVLW  03
01C74:  ADDWF  53,W
01C76:  MOVWF  01
01C78:  MOVLW  00
01C7A:  ADDWFC 54,W
01C7C:  MOVWF  03
01C7E:  MOVF   01,W
01C80:  ADDLW  2F
01C82:  MOVWF  FE9
01C84:  MOVLW  00
01C86:  ADDWFC 03,W
01C88:  MOVWF  FEA
01C8A:  DECFSZ FEF,W
01C8C:  BRA    1C9C
....................                printf(lcd_putc,"Enable "); 
01C8E:  MOVLW  20
01C90:  MOVWF  FF6
01C92:  MOVLW  02
01C94:  MOVWF  FF7
01C96:  CALL   0D54
....................             else 
01C9A:  BRA    1CA8
....................                printf(lcd_putc,"Disable");            
01C9C:  MOVLW  28
01C9E:  MOVWF  FF6
01CA0:  MOVLW  02
01CA2:  MOVWF  FF7
01CA4:  CALL   0D54
....................          }  
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
01CA8:  BTFSC  F81.1
01CAA:  BRA    1DAC
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01CAC:  BSF    F8B.0
....................             delay_ms(150); 
01CAE:  MOVLW  96
01CB0:  MOVWF  5C
01CB2:  CALL   0860
....................             Speaker = 0; 
01CB6:  BCF    F8B.0
....................             delay_ms(150);  
01CB8:  MOVLW  96
01CBA:  MOVWF  5C
01CBC:  CALL   0860
....................             STT_time_on--; 
01CC0:  DECF   29,F
....................             if(STT_time_on==0)        STT_time_on=3;  
01CC2:  MOVF   29,F
01CC4:  BNZ   1CCA
01CC6:  MOVLW  03
01CC8:  MOVWF  29
....................             //put_time(STT_time_on,15,2); 
....................             put_time(DEV_INFO[STT_time_on].hour_on,16,3); 
01CCA:  MOVF   29,W
01CCC:  MULLW  04
01CCE:  MOVF   FF3,W
01CD0:  CLRF   54
01CD2:  MOVWF  53
01CD4:  MOVLW  2F
01CD6:  ADDWF  53,W
01CD8:  MOVWF  FE9
01CDA:  MOVLW  00
01CDC:  ADDWFC 54,W
01CDE:  MOVWF  FEA
01CE0:  MOVFF  FEF,55
01CE4:  MOVFF  55,56
01CE8:  MOVLW  10
01CEA:  MOVWF  57
01CEC:  MOVLW  03
01CEE:  MOVWF  58
01CF0:  CALL   0D74
....................             put_time(DEV_INFO[STT_time_on].minute_on,19,3); 
01CF4:  MOVF   29,W
01CF6:  MULLW  04
01CF8:  MOVF   FF3,W
01CFA:  CLRF   54
01CFC:  MOVWF  53
01CFE:  MOVLW  01
01D00:  ADDWF  53,W
01D02:  MOVWF  01
01D04:  MOVLW  00
01D06:  ADDWFC 54,W
01D08:  MOVWF  03
01D0A:  MOVF   01,W
01D0C:  ADDLW  2F
01D0E:  MOVWF  FE9
01D10:  MOVLW  00
01D12:  ADDWFC 03,W
01D14:  MOVWF  FEA
01D16:  MOVFF  FEF,53
01D1A:  MOVFF  53,56
01D1E:  MOVLW  13
01D20:  MOVWF  57
01D22:  MOVLW  03
01D24:  MOVWF  58
01D26:  CALL   0D74
....................             put_time(DEV_INFO[STT_time_on].time_on,17,4); 
01D2A:  MOVF   29,W
01D2C:  MULLW  04
01D2E:  MOVF   FF3,W
01D30:  CLRF   54
01D32:  MOVWF  53
01D34:  MOVLW  02
01D36:  ADDWF  53,W
01D38:  MOVWF  01
01D3A:  MOVLW  00
01D3C:  ADDWFC 54,W
01D3E:  MOVWF  03
01D40:  MOVF   01,W
01D42:  ADDLW  2F
01D44:  MOVWF  FE9
01D46:  MOVLW  00
01D48:  ADDWFC 03,W
01D4A:  MOVWF  FEA
01D4C:  MOVFF  FEF,53
01D50:  MOVFF  53,56
01D54:  MOVLW  11
01D56:  MOVWF  57
01D58:  MOVLW  04
01D5A:  MOVWF  58
01D5C:  CALL   0D74
....................             lcd_gotoxy(1,3); 
01D60:  MOVLW  01
01D62:  MOVWF  5C
01D64:  MOVLW  03
01D66:  MOVWF  5D
01D68:  CALL   0CC8
....................             if(DEV_INFO[STT_time_on].state_on==1) 
01D6C:  MOVF   29,W
01D6E:  MULLW  04
01D70:  MOVF   FF3,W
01D72:  CLRF   54
01D74:  MOVWF  53
01D76:  MOVLW  03
01D78:  ADDWF  53,W
01D7A:  MOVWF  01
01D7C:  MOVLW  00
01D7E:  ADDWFC 54,W
01D80:  MOVWF  03
01D82:  MOVF   01,W
01D84:  ADDLW  2F
01D86:  MOVWF  FE9
01D88:  MOVLW  00
01D8A:  ADDWFC 03,W
01D8C:  MOVWF  FEA
01D8E:  DECFSZ FEF,W
01D90:  BRA    1DA0
....................                printf(lcd_putc,"Enable "); 
01D92:  MOVLW  30
01D94:  MOVWF  FF6
01D96:  MOVLW  02
01D98:  MOVWF  FF7
01D9A:  CALL   0D54
....................             else 
01D9E:  BRA    1DAC
....................                printf(lcd_putc,"Disable");  
01DA0:  MOVLW  38
01DA2:  MOVWF  FF6
01DA4:  MOVLW  02
01DA6:  MOVWF  FF7
01DA8:  CALL   0D54
....................              
....................          }  
....................       }  
....................       break; 
01DAC:  BRA    2462
....................       // chon che do la disable hay enable gio bat tat may bom 
....................       case 1:              
....................       { 
....................          lcd_gotoxy(1,3);  
01DAE:  MOVLW  01
01DB0:  MOVWF  5C
01DB2:  MOVLW  03
01DB4:  MOVWF  5D
01DB6:  CALL   0CC8
....................          lcd_blink_on(); 
01DBA:  CALL   1086
....................          lcd_gotoxy(1,3);  
01DBE:  MOVLW  01
01DC0:  MOVWF  5C
01DC2:  MOVLW  03
01DC4:  MOVWF  5D
01DC6:  CALL   0CC8
....................          if(DEV_INFO[STT_time_on].state_on==1)                
01DCA:  MOVF   29,W
01DCC:  MULLW  04
01DCE:  MOVF   FF3,W
01DD0:  CLRF   54
01DD2:  MOVWF  53
01DD4:  MOVLW  03
01DD6:  ADDWF  53,W
01DD8:  MOVWF  01
01DDA:  MOVLW  00
01DDC:  ADDWFC 54,W
01DDE:  MOVWF  03
01DE0:  MOVF   01,W
01DE2:  ADDLW  2F
01DE4:  MOVWF  FE9
01DE6:  MOVLW  00
01DE8:  ADDWFC 03,W
01DEA:  MOVWF  FEA
01DEC:  DECFSZ FEF,W
01DEE:  BRA    1DFE
....................                printf(lcd_putc,"Enable"); 
01DF0:  MOVLW  40
01DF2:  MOVWF  FF6
01DF4:  MOVLW  02
01DF6:  MOVWF  FF7
01DF8:  CALL   0D54
....................          else 
01DFC:  BRA    1E0A
....................                printf(lcd_putc,"Disable "); 
01DFE:  MOVLW  48
01E00:  MOVWF  FF6
01E02:  MOVLW  02
01E04:  MOVWF  FF7
01E06:  CALL   0D54
....................          delay_ms(100); 
01E0A:  MOVLW  64
01E0C:  MOVWF  5C
01E0E:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
01E12:  BTFSC  F81.2
01E14:  BRA    1EC0
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01E16:  BSF    F8B.0
....................             delay_ms(150); 
01E18:  MOVLW  96
01E1A:  MOVWF  5C
01E1C:  CALL   0860
....................             Speaker = 0; 
01E20:  BCF    F8B.0
....................             delay_ms(150); 
01E22:  MOVLW  96
01E24:  MOVWF  5C
01E26:  CALL   0860
....................             lcd_gotoxy(1,3);  
01E2A:  MOVLW  01
01E2C:  MOVWF  5C
01E2E:  MOVLW  03
01E30:  MOVWF  5D
01E32:  CALL   0CC8
....................             if(DEV_INFO[STT_time_on].state_on==1)                
01E36:  MOVF   29,W
01E38:  MULLW  04
01E3A:  MOVF   FF3,W
01E3C:  CLRF   54
01E3E:  MOVWF  53
01E40:  MOVLW  03
01E42:  ADDWF  53,W
01E44:  MOVWF  01
01E46:  MOVLW  00
01E48:  ADDWFC 54,W
01E4A:  MOVWF  03
01E4C:  MOVF   01,W
01E4E:  ADDLW  2F
01E50:  MOVWF  FE9
01E52:  MOVLW  00
01E54:  ADDWFC 03,W
01E56:  MOVWF  FEA
01E58:  DECFSZ FEF,W
01E5A:  BRA    1E8E
....................             { 
....................                printf(lcd_putc,"Disable"); 
01E5C:  MOVLW  52
01E5E:  MOVWF  FF6
01E60:  MOVLW  02
01E62:  MOVWF  FF7
01E64:  CALL   0D54
....................                DEV_INFO[STT_time_on].state_on=0; 
01E68:  MOVF   29,W
01E6A:  MULLW  04
01E6C:  MOVF   FF3,W
01E6E:  CLRF   54
01E70:  MOVWF  53
01E72:  MOVLW  03
01E74:  ADDWF  53,W
01E76:  MOVWF  01
01E78:  MOVLW  00
01E7A:  ADDWFC 54,W
01E7C:  MOVWF  03
01E7E:  MOVF   01,W
01E80:  ADDLW  2F
01E82:  MOVWF  FE9
01E84:  MOVLW  00
01E86:  ADDWFC 03,W
01E88:  MOVWF  FEA
01E8A:  CLRF   FEF
....................             } 
....................             else 
01E8C:  BRA    1EC0
....................             { 
....................                printf(lcd_putc,"Enable "); 
01E8E:  MOVLW  5A
01E90:  MOVWF  FF6
01E92:  MOVLW  02
01E94:  MOVWF  FF7
01E96:  CALL   0D54
....................                DEV_INFO[STT_time_on].state_on=1; 
01E9A:  MOVF   29,W
01E9C:  MULLW  04
01E9E:  MOVF   FF3,W
01EA0:  CLRF   54
01EA2:  MOVWF  53
01EA4:  MOVLW  03
01EA6:  ADDWF  53,W
01EA8:  MOVWF  01
01EAA:  MOVLW  00
01EAC:  ADDWFC 54,W
01EAE:  MOVWF  03
01EB0:  MOVF   01,W
01EB2:  ADDLW  2F
01EB4:  MOVWF  FE9
01EB6:  MOVLW  00
01EB8:  ADDWFC 03,W
01EBA:  MOVWF  FEA
01EBC:  MOVLW  01
01EBE:  MOVWF  FEF
....................             } 
....................           } 
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
01EC0:  BTFSC  F81.1
01EC2:  BRA    1F6E
....................          { 
....................                     //cho toi khi tha nut bam 
....................             Speaker = 1; 
01EC4:  BSF    F8B.0
....................             delay_ms(150); 
01EC6:  MOVLW  96
01EC8:  MOVWF  5C
01ECA:  CALL   0860
....................             Speaker = 0; 
01ECE:  BCF    F8B.0
....................             delay_ms(150); 
01ED0:  MOVLW  96
01ED2:  MOVWF  5C
01ED4:  CALL   0860
....................             lcd_gotoxy(1,3);  
01ED8:  MOVLW  01
01EDA:  MOVWF  5C
01EDC:  MOVLW  03
01EDE:  MOVWF  5D
01EE0:  CALL   0CC8
....................             if(DEV_INFO[STT_time_on].state_on==1)                
01EE4:  MOVF   29,W
01EE6:  MULLW  04
01EE8:  MOVF   FF3,W
01EEA:  CLRF   54
01EEC:  MOVWF  53
01EEE:  MOVLW  03
01EF0:  ADDWF  53,W
01EF2:  MOVWF  01
01EF4:  MOVLW  00
01EF6:  ADDWFC 54,W
01EF8:  MOVWF  03
01EFA:  MOVF   01,W
01EFC:  ADDLW  2F
01EFE:  MOVWF  FE9
01F00:  MOVLW  00
01F02:  ADDWFC 03,W
01F04:  MOVWF  FEA
01F06:  DECFSZ FEF,W
01F08:  BRA    1F3C
....................             { 
....................                printf(lcd_putc,"Disable"); 
01F0A:  MOVLW  62
01F0C:  MOVWF  FF6
01F0E:  MOVLW  02
01F10:  MOVWF  FF7
01F12:  CALL   0D54
....................                DEV_INFO[STT_time_on].state_on=0; 
01F16:  MOVF   29,W
01F18:  MULLW  04
01F1A:  MOVF   FF3,W
01F1C:  CLRF   54
01F1E:  MOVWF  53
01F20:  MOVLW  03
01F22:  ADDWF  53,W
01F24:  MOVWF  01
01F26:  MOVLW  00
01F28:  ADDWFC 54,W
01F2A:  MOVWF  03
01F2C:  MOVF   01,W
01F2E:  ADDLW  2F
01F30:  MOVWF  FE9
01F32:  MOVLW  00
01F34:  ADDWFC 03,W
01F36:  MOVWF  FEA
01F38:  CLRF   FEF
....................             } 
....................             else 
01F3A:  BRA    1F6E
....................             { 
....................                printf(lcd_putc,"Enable "); 
01F3C:  MOVLW  6A
01F3E:  MOVWF  FF6
01F40:  MOVLW  02
01F42:  MOVWF  FF7
01F44:  CALL   0D54
....................                DEV_INFO[STT_time_on].state_on=1; 
01F48:  MOVF   29,W
01F4A:  MULLW  04
01F4C:  MOVF   FF3,W
01F4E:  CLRF   54
01F50:  MOVWF  53
01F52:  MOVLW  03
01F54:  ADDWF  53,W
01F56:  MOVWF  01
01F58:  MOVLW  00
01F5A:  ADDWFC 54,W
01F5C:  MOVWF  03
01F5E:  MOVF   01,W
01F60:  ADDLW  2F
01F62:  MOVWF  FE9
01F64:  MOVLW  00
01F66:  ADDWFC 03,W
01F68:  MOVWF  FEA
01F6A:  MOVLW  01
01F6C:  MOVWF  FEF
....................             } 
....................          } 
....................      } 
....................       break; 
01F6E:  BRA    2462
....................       // neu an nut tang giam thi se thay doi gia tri gio bat bom 
....................       case 2:             //set minute 
....................       {     
....................          lcd_gotoxy(16,3);  
01F70:  MOVLW  10
01F72:  MOVWF  5C
01F74:  MOVLW  03
01F76:  MOVWF  5D
01F78:  CALL   0CC8
....................          lcd_blink_on();  
01F7C:  CALL   1086
....................          put_time(DEV_INFO[STT_time_on].hour_on,16,3); 
01F80:  MOVF   29,W
01F82:  MULLW  04
01F84:  MOVF   FF3,W
01F86:  CLRF   54
01F88:  MOVWF  53
01F8A:  MOVLW  2F
01F8C:  ADDWF  53,W
01F8E:  MOVWF  FE9
01F90:  MOVLW  00
01F92:  ADDWFC 54,W
01F94:  MOVWF  FEA
01F96:  MOVFF  FEF,55
01F9A:  MOVFF  55,56
01F9E:  MOVLW  10
01FA0:  MOVWF  57
01FA2:  MOVLW  03
01FA4:  MOVWF  58
01FA6:  CALL   0D74
....................          delay_ms(100); 
01FAA:  MOVLW  64
01FAC:  MOVWF  5C
01FAE:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
01FB2:  BTFSC  F81.2
01FB4:  BRA    2016
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
01FB6:  BSF    F8B.0
....................             delay_ms(150); 
01FB8:  MOVLW  96
01FBA:  MOVWF  5C
01FBC:  CALL   0860
....................             Speaker = 0; 
01FC0:  BCF    F8B.0
....................             delay_ms(150); 
01FC2:  MOVLW  96
01FC4:  MOVWF  5C
01FC6:  CALL   0860
....................             DEV_INFO[STT_time_on].hour_on++; 
01FCA:  MOVF   29,W
01FCC:  MULLW  04
01FCE:  MOVF   FF3,W
01FD0:  CLRF   54
01FD2:  MOVWF  53
01FD4:  MOVLW  2F
01FD6:  ADDWF  53,W
01FD8:  MOVWF  FE9
01FDA:  MOVLW  00
01FDC:  ADDWFC 54,W
01FDE:  MOVWF  FEA
01FE0:  INCF   FEF,F
....................             if(DEV_INFO[STT_time_on].hour_on==24)   DEV_INFO[STT_time_on].hour_on=0;    
01FE2:  MOVF   29,W
01FE4:  MULLW  04
01FE6:  MOVF   FF3,W
01FE8:  CLRF   54
01FEA:  MOVWF  53
01FEC:  MOVLW  2F
01FEE:  ADDWF  53,W
01FF0:  MOVWF  FE9
01FF2:  MOVLW  00
01FF4:  ADDWFC 54,W
01FF6:  MOVWF  FEA
01FF8:  MOVF   FEF,W
01FFA:  SUBLW  18
01FFC:  BNZ   2016
01FFE:  MOVF   29,W
02000:  MULLW  04
02002:  MOVF   FF3,W
02004:  CLRF   54
02006:  MOVWF  53
02008:  MOVLW  2F
0200A:  ADDWF  53,W
0200C:  MOVWF  FE9
0200E:  MOVLW  00
02010:  ADDWFC 54,W
02012:  MOVWF  FEA
02014:  CLRF   FEF
....................             //put_time(DEV_INFO[STT_time_on].hour_on,16,3);  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
02016:  BTFSC  F81.1
02018:  BRA    207A
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0201A:  BSF    F8B.0
....................             delay_ms(150); 
0201C:  MOVLW  96
0201E:  MOVWF  5C
02020:  CALL   0860
....................             Speaker = 0; 
02024:  BCF    F8B.0
....................             delay_ms(150); 
02026:  MOVLW  96
02028:  MOVWF  5C
0202A:  CALL   0860
....................             DEV_INFO[STT_time_on].hour_on--; 
0202E:  MOVF   29,W
02030:  MULLW  04
02032:  MOVF   FF3,W
02034:  CLRF   54
02036:  MOVWF  53
02038:  MOVLW  2F
0203A:  ADDWF  53,W
0203C:  MOVWF  FE9
0203E:  MOVLW  00
02040:  ADDWFC 54,W
02042:  MOVWF  FEA
02044:  DECF   FEF,F
....................             if(DEV_INFO[STT_time_on].hour_on==255)   DEV_INFO[STT_time_on].hour_on=23;    
02046:  MOVF   29,W
02048:  MULLW  04
0204A:  MOVF   FF3,W
0204C:  CLRF   54
0204E:  MOVWF  53
02050:  MOVLW  2F
02052:  ADDWF  53,W
02054:  MOVWF  FE9
02056:  MOVLW  00
02058:  ADDWFC 54,W
0205A:  MOVWF  FEA
0205C:  INCFSZ FEF,W
0205E:  BRA    207A
02060:  MOVF   29,W
02062:  MULLW  04
02064:  MOVF   FF3,W
02066:  CLRF   54
02068:  MOVWF  53
0206A:  MOVLW  2F
0206C:  ADDWF  53,W
0206E:  MOVWF  FE9
02070:  MOVLW  00
02072:  ADDWFC 54,W
02074:  MOVWF  FEA
02076:  MOVLW  17
02078:  MOVWF  FEF
....................             //put_time(DEV_INFO[STT_time_on].hour_on,16,3);  
....................          } 
....................        } 
....................       break; 
0207A:  BRA    2462
....................       // neu an nut tang giam thi se thay doi gia tri phut bat 
....................       case 3:             //set minute 
....................       {     
....................          lcd_gotoxy(19,3);  
0207C:  MOVLW  13
0207E:  MOVWF  5C
02080:  MOVLW  03
02082:  MOVWF  5D
02084:  CALL   0CC8
....................          lcd_blink_on();  
02088:  CALL   1086
....................          put_time(DEV_INFO[STT_time_on].minute_on,19,3); 
0208C:  MOVF   29,W
0208E:  MULLW  04
02090:  MOVF   FF3,W
02092:  CLRF   54
02094:  MOVWF  53
02096:  MOVLW  01
02098:  ADDWF  53,W
0209A:  MOVWF  01
0209C:  MOVLW  00
0209E:  ADDWFC 54,W
020A0:  MOVWF  03
020A2:  MOVF   01,W
020A4:  ADDLW  2F
020A6:  MOVWF  FE9
020A8:  MOVLW  00
020AA:  ADDWFC 03,W
020AC:  MOVWF  FEA
020AE:  MOVFF  FEF,53
020B2:  MOVFF  53,56
020B6:  MOVLW  13
020B8:  MOVWF  57
020BA:  MOVLW  03
020BC:  MOVWF  58
020BE:  CALL   0D74
....................          delay_ms(100); 
020C2:  MOVLW  64
020C4:  MOVWF  5C
020C6:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
020CA:  BTFSC  F81.2
020CC:  BRA    2156
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
020CE:  BSF    F8B.0
....................             delay_ms(150); 
020D0:  MOVLW  96
020D2:  MOVWF  5C
020D4:  CALL   0860
....................             Speaker = 0; 
020D8:  BCF    F8B.0
....................             delay_ms(150); 
020DA:  MOVLW  96
020DC:  MOVWF  5C
020DE:  CALL   0860
....................             DEV_INFO[STT_time_on].minute_on+=5; 
020E2:  MOVF   29,W
020E4:  MULLW  04
020E6:  MOVF   FF3,W
020E8:  CLRF   54
020EA:  MOVWF  53
020EC:  MOVLW  01
020EE:  ADDWF  53,W
020F0:  MOVWF  01
020F2:  MOVLW  00
020F4:  ADDWFC 54,W
020F6:  MOVWF  03
020F8:  MOVF   01,W
020FA:  ADDLW  2F
020FC:  MOVWF  FE9
020FE:  MOVLW  00
02100:  ADDWFC 03,W
02102:  MOVWF  FEA
02104:  MOVLW  05
02106:  ADDWF  FEF,W
02108:  MOVWF  FEF
....................             if(DEV_INFO[STT_time_on].minute_on==60)   DEV_INFO[STT_time_on].minute_on=0;    
0210A:  MOVF   29,W
0210C:  MULLW  04
0210E:  MOVF   FF3,W
02110:  CLRF   54
02112:  MOVWF  53
02114:  MOVLW  01
02116:  ADDWF  53,W
02118:  MOVWF  01
0211A:  MOVLW  00
0211C:  ADDWFC 54,W
0211E:  MOVWF  03
02120:  MOVF   01,W
02122:  ADDLW  2F
02124:  MOVWF  FE9
02126:  MOVLW  00
02128:  ADDWFC 03,W
0212A:  MOVWF  FEA
0212C:  MOVF   FEF,W
0212E:  SUBLW  3C
02130:  BNZ   2156
02132:  MOVF   29,W
02134:  MULLW  04
02136:  MOVF   FF3,W
02138:  CLRF   54
0213A:  MOVWF  53
0213C:  MOVLW  01
0213E:  ADDWF  53,W
02140:  MOVWF  01
02142:  MOVLW  00
02144:  ADDWFC 54,W
02146:  MOVWF  03
02148:  MOVF   01,W
0214A:  ADDLW  2F
0214C:  MOVWF  FE9
0214E:  MOVLW  00
02150:  ADDWFC 03,W
02152:  MOVWF  FEA
02154:  CLRF   FEF
....................             //put_time(DEV_INFO[STT_time_on].minute_on,19,3);  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
02156:  BTFSC  F81.1
02158:  BRA    21E4
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0215A:  BSF    F8B.0
....................             delay_ms(150); 
0215C:  MOVLW  96
0215E:  MOVWF  5C
02160:  CALL   0860
....................             Speaker = 0; 
02164:  BCF    F8B.0
....................             delay_ms(150); 
02166:  MOVLW  96
02168:  MOVWF  5C
0216A:  CALL   0860
....................             DEV_INFO[STT_time_on].minute_on-=5; 
0216E:  MOVF   29,W
02170:  MULLW  04
02172:  MOVF   FF3,W
02174:  CLRF   54
02176:  MOVWF  53
02178:  MOVLW  01
0217A:  ADDWF  53,W
0217C:  MOVWF  01
0217E:  MOVLW  00
02180:  ADDWFC 54,W
02182:  MOVWF  03
02184:  MOVF   01,W
02186:  ADDLW  2F
02188:  MOVWF  FE9
0218A:  MOVLW  00
0218C:  ADDWFC 03,W
0218E:  MOVWF  FEA
02190:  MOVLW  05
02192:  SUBWF  FEF,W
02194:  MOVWF  FEF
....................             if(DEV_INFO[STT_time_on].minute_on>250)   DEV_INFO[STT_time_on].minute_on=55;    
02196:  MOVF   29,W
02198:  MULLW  04
0219A:  MOVF   FF3,W
0219C:  CLRF   54
0219E:  MOVWF  53
021A0:  MOVLW  01
021A2:  ADDWF  53,W
021A4:  MOVWF  01
021A6:  MOVLW  00
021A8:  ADDWFC 54,W
021AA:  MOVWF  03
021AC:  MOVF   01,W
021AE:  ADDLW  2F
021B0:  MOVWF  FE9
021B2:  MOVLW  00
021B4:  ADDWFC 03,W
021B6:  MOVWF  FEA
021B8:  MOVF   FEF,W
021BA:  SUBLW  FA
021BC:  BC    21E4
021BE:  MOVF   29,W
021C0:  MULLW  04
021C2:  MOVF   FF3,W
021C4:  CLRF   54
021C6:  MOVWF  53
021C8:  MOVLW  01
021CA:  ADDWF  53,W
021CC:  MOVWF  01
021CE:  MOVLW  00
021D0:  ADDWFC 54,W
021D2:  MOVWF  03
021D4:  MOVF   01,W
021D6:  ADDLW  2F
021D8:  MOVWF  FE9
021DA:  MOVLW  00
021DC:  ADDWFC 03,W
021DE:  MOVWF  FEA
021E0:  MOVLW  37
021E2:  MOVWF  FEF
....................             //put_time(DEV_INFO[STT_time_on].minute_on,19,3);  
....................          } 
....................        } 
....................       break; 
021E4:  BRA    2462
....................       // luu gia tri setup vao ds1307 
....................       case 4:             
....................       { 
....................          lcd_gotoxy(17,4);  
021E6:  MOVLW  11
021E8:  MOVWF  5C
021EA:  MOVLW  04
021EC:  MOVWF  5D
021EE:  CALL   0CC8
....................          lcd_blink_on();  
021F2:  CALL   1086
....................          put_time(DEV_INFO[STT_time_on].time_on,17,4); 
021F6:  MOVF   29,W
021F8:  MULLW  04
021FA:  MOVF   FF3,W
021FC:  CLRF   54
021FE:  MOVWF  53
02200:  MOVLW  02
02202:  ADDWF  53,W
02204:  MOVWF  01
02206:  MOVLW  00
02208:  ADDWFC 54,W
0220A:  MOVWF  03
0220C:  MOVF   01,W
0220E:  ADDLW  2F
02210:  MOVWF  FE9
02212:  MOVLW  00
02214:  ADDWFC 03,W
02216:  MOVWF  FEA
02218:  MOVFF  FEF,53
0221C:  MOVFF  53,56
02220:  MOVLW  11
02222:  MOVWF  57
02224:  MOVLW  04
02226:  MOVWF  58
02228:  CALL   0D74
....................          delay_ms(100); 
0222C:  MOVLW  64
0222E:  MOVWF  5C
02230:  CALL   0860
....................          if(!UP_BTN)            //neu bam button add------ 
02234:  BTFSC  F81.2
02236:  BRA    22C0
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
02238:  BSF    F8B.0
....................             delay_ms(150); 
0223A:  MOVLW  96
0223C:  MOVWF  5C
0223E:  CALL   0860
....................             Speaker = 0; 
02242:  BCF    F8B.0
....................             delay_ms(150); 
02244:  MOVLW  96
02246:  MOVWF  5C
02248:  CALL   0860
....................             DEV_INFO[STT_time_on].time_on+=5; 
0224C:  MOVF   29,W
0224E:  MULLW  04
02250:  MOVF   FF3,W
02252:  CLRF   54
02254:  MOVWF  53
02256:  MOVLW  02
02258:  ADDWF  53,W
0225A:  MOVWF  01
0225C:  MOVLW  00
0225E:  ADDWFC 54,W
02260:  MOVWF  03
02262:  MOVF   01,W
02264:  ADDLW  2F
02266:  MOVWF  FE9
02268:  MOVLW  00
0226A:  ADDWFC 03,W
0226C:  MOVWF  FEA
0226E:  MOVLW  05
02270:  ADDWF  FEF,W
02272:  MOVWF  FEF
....................             if(DEV_INFO[STT_time_on].time_on==65)   DEV_INFO[STT_time_on].time_on=0;    
02274:  MOVF   29,W
02276:  MULLW  04
02278:  MOVF   FF3,W
0227A:  CLRF   54
0227C:  MOVWF  53
0227E:  MOVLW  02
02280:  ADDWF  53,W
02282:  MOVWF  01
02284:  MOVLW  00
02286:  ADDWFC 54,W
02288:  MOVWF  03
0228A:  MOVF   01,W
0228C:  ADDLW  2F
0228E:  MOVWF  FE9
02290:  MOVLW  00
02292:  ADDWFC 03,W
02294:  MOVWF  FEA
02296:  MOVF   FEF,W
02298:  SUBLW  41
0229A:  BNZ   22C0
0229C:  MOVF   29,W
0229E:  MULLW  04
022A0:  MOVF   FF3,W
022A2:  CLRF   54
022A4:  MOVWF  53
022A6:  MOVLW  02
022A8:  ADDWF  53,W
022AA:  MOVWF  01
022AC:  MOVLW  00
022AE:  ADDWFC 54,W
022B0:  MOVWF  03
022B2:  MOVF   01,W
022B4:  ADDLW  2F
022B6:  MOVWF  FE9
022B8:  MOVLW  00
022BA:  ADDWFC 03,W
022BC:  MOVWF  FEA
022BE:  CLRF   FEF
....................             //put_time(DEV_INFO[STT_time_on].time_on,17,4);  
....................          } 
....................          if(!DOWN_BTN)            //neu bam button add------ 
022C0:  BTFSC  F81.1
022C2:  BRA    234E
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
022C4:  BSF    F8B.0
....................             delay_ms(150); 
022C6:  MOVLW  96
022C8:  MOVWF  5C
022CA:  CALL   0860
....................             Speaker = 0; 
022CE:  BCF    F8B.0
....................             delay_ms(150); 
022D0:  MOVLW  96
022D2:  MOVWF  5C
022D4:  CALL   0860
....................             DEV_INFO[STT_time_on].time_on-=5; 
022D8:  MOVF   29,W
022DA:  MULLW  04
022DC:  MOVF   FF3,W
022DE:  CLRF   54
022E0:  MOVWF  53
022E2:  MOVLW  02
022E4:  ADDWF  53,W
022E6:  MOVWF  01
022E8:  MOVLW  00
022EA:  ADDWFC 54,W
022EC:  MOVWF  03
022EE:  MOVF   01,W
022F0:  ADDLW  2F
022F2:  MOVWF  FE9
022F4:  MOVLW  00
022F6:  ADDWFC 03,W
022F8:  MOVWF  FEA
022FA:  MOVLW  05
022FC:  SUBWF  FEF,W
022FE:  MOVWF  FEF
....................             if(DEV_INFO[STT_time_on].time_on>250)   DEV_INFO[STT_time_on].time_on=60;    
02300:  MOVF   29,W
02302:  MULLW  04
02304:  MOVF   FF3,W
02306:  CLRF   54
02308:  MOVWF  53
0230A:  MOVLW  02
0230C:  ADDWF  53,W
0230E:  MOVWF  01
02310:  MOVLW  00
02312:  ADDWFC 54,W
02314:  MOVWF  03
02316:  MOVF   01,W
02318:  ADDLW  2F
0231A:  MOVWF  FE9
0231C:  MOVLW  00
0231E:  ADDWFC 03,W
02320:  MOVWF  FEA
02322:  MOVF   FEF,W
02324:  SUBLW  FA
02326:  BC    234E
02328:  MOVF   29,W
0232A:  MULLW  04
0232C:  MOVF   FF3,W
0232E:  CLRF   54
02330:  MOVWF  53
02332:  MOVLW  02
02334:  ADDWF  53,W
02336:  MOVWF  01
02338:  MOVLW  00
0233A:  ADDWFC 54,W
0233C:  MOVWF  03
0233E:  MOVF   01,W
02340:  ADDLW  2F
02342:  MOVWF  FE9
02344:  MOVLW  00
02346:  ADDWFC 03,W
02348:  MOVWF  FEA
0234A:  MOVLW  3C
0234C:  MOVWF  FEF
....................             //put_time(DEV_INFO[STT_time_on].time_on,17,4);  
....................          } 
....................       } 
....................       break; 
0234E:  BRA    2462
....................       // luu cac gia tri da set vao eeprom tren 24LC01 
....................       case 5: 
....................       { 
....................          //lcd_blink_off();  
....................          //luu vao eeprom dia chi luu la tu 0x0A 
....................          write_ext_eeprom(0x0A+4*STT_time_on+0,DEV_INFO[STT_time_on].hour_on); 
02350:  MOVF   29,W
02352:  MULLW  04
02354:  MOVF   FF3,W
02356:  ADDLW  0A
02358:  MOVWF  53
0235A:  MOVF   29,W
0235C:  MULLW  04
0235E:  MOVF   FF3,W
02360:  CLRF   55
02362:  MOVWF  54
02364:  MOVLW  2F
02366:  ADDWF  54,W
02368:  MOVWF  FE9
0236A:  MOVLW  00
0236C:  ADDWFC 55,W
0236E:  MOVWF  FEA
02370:  MOVFF  FEF,56
02374:  CLRF   58
02376:  MOVFF  53,57
0237A:  MOVFF  56,59
0237E:  CALL   1764
....................          write_ext_eeprom(0x0A+4*STT_time_on+1,DEV_INFO[STT_time_on].minute_on); 
02382:  MOVF   29,W
02384:  MULLW  04
02386:  MOVF   FF3,W
02388:  ADDLW  0A
0238A:  ADDLW  01
0238C:  MOVWF  53
0238E:  MOVF   29,W
02390:  MULLW  04
02392:  MOVF   FF3,W
02394:  CLRF   55
02396:  MOVWF  54
02398:  MOVLW  01
0239A:  ADDWF  54,W
0239C:  MOVWF  01
0239E:  MOVLW  00
023A0:  ADDWFC 55,W
023A2:  MOVWF  03
023A4:  MOVF   01,W
023A6:  ADDLW  2F
023A8:  MOVWF  FE9
023AA:  MOVLW  00
023AC:  ADDWFC 03,W
023AE:  MOVWF  FEA
023B0:  MOVFF  FEF,54
023B4:  CLRF   58
023B6:  MOVFF  53,57
023BA:  MOVFF  54,59
023BE:  CALL   1764
....................          write_ext_eeprom(0x0A+4*STT_time_on+2,DEV_INFO[STT_time_on].time_on); 
023C2:  MOVF   29,W
023C4:  MULLW  04
023C6:  MOVF   FF3,W
023C8:  ADDLW  0A
023CA:  ADDLW  02
023CC:  MOVWF  53
023CE:  MOVF   29,W
023D0:  MULLW  04
023D2:  MOVF   FF3,W
023D4:  CLRF   55
023D6:  MOVWF  54
023D8:  MOVLW  02
023DA:  ADDWF  54,W
023DC:  MOVWF  01
023DE:  MOVLW  00
023E0:  ADDWFC 55,W
023E2:  MOVWF  03
023E4:  MOVF   01,W
023E6:  ADDLW  2F
023E8:  MOVWF  FE9
023EA:  MOVLW  00
023EC:  ADDWFC 03,W
023EE:  MOVWF  FEA
023F0:  MOVFF  FEF,54
023F4:  CLRF   58
023F6:  MOVFF  53,57
023FA:  MOVFF  54,59
023FE:  CALL   1764
....................          write_ext_eeprom(0x0A+4*STT_time_on+3,DEV_INFO[STT_time_on].state_on); 
02402:  MOVF   29,W
02404:  MULLW  04
02406:  MOVF   FF3,W
02408:  ADDLW  0A
0240A:  ADDLW  03
0240C:  MOVWF  53
0240E:  MOVF   29,W
02410:  MULLW  04
02412:  MOVF   FF3,W
02414:  CLRF   55
02416:  MOVWF  54
02418:  MOVLW  03
0241A:  ADDWF  54,W
0241C:  MOVWF  01
0241E:  MOVLW  00
02420:  ADDWFC 55,W
02422:  MOVWF  03
02424:  MOVF   01,W
02426:  ADDLW  2F
02428:  MOVWF  FE9
0242A:  MOVLW  00
0242C:  ADDWFC 03,W
0242E:  MOVWF  FEA
02430:  MOVFF  FEF,54
02434:  CLRF   58
02436:  MOVFF  53,57
0243A:  MOVFF  54,59
0243E:  CALL   1764
....................          // hien thi len lcd trang thai da luu du lieu vao eeprom 
....................          lcd_gotoxy(1,4); 
02442:  MOVLW  01
02444:  MOVWF  5C
02446:  MOVLW  04
02448:  MOVWF  5D
0244A:  CALL   0CC8
....................          printf(lcd_putc,">Stored"); 
0244E:  MOVLW  72
02450:  MOVWF  FF6
02452:  MOVLW  02
02454:  MOVWF  FF7
02456:  CALL   0D54
....................          set_flag_mode2=6; 
0245A:  MOVLW  06
0245C:  MOVWF  28
....................           
....................       } 
....................       break; 
0245E:  BRA    2462
....................       default: 
....................       break; 
02460:  BRA    2462
....................    } 
.................... } 
02462:  GOTO   255E (RETURN)
....................  
.................... // ham loa du lieu tu eeprom 
.................... void load_eeprom() 
.................... { 
....................    unsigned char i; 
....................    for(i=1;i<5;i++) 
*
00B86:  MOVLW  01
00B88:  MOVWF  53
00B8A:  MOVF   53,W
00B8C:  SUBLW  04
00B8E:  BTFSS  FD8.0
00B90:  BRA    0CA0
....................    { 
....................       DEV_INFO[i].hour_on   = read_ext_eeprom(0x0A+4*i+0); 
00B92:  MOVF   53,W
00B94:  MULLW  04
00B96:  MOVF   FF3,W
00B98:  CLRF   55
00B9A:  MOVWF  54
00B9C:  MOVLW  2F
00B9E:  ADDWF  54,W
00BA0:  MOVWF  01
00BA2:  MOVLW  00
00BA4:  ADDWFC 55,W
00BA6:  MOVWF  03
00BA8:  MOVFF  01,56
00BAC:  MOVWF  57
00BAE:  MOVF   53,W
00BB0:  MULLW  04
00BB2:  MOVF   FF3,W
00BB4:  ADDLW  0A
00BB6:  MOVWF  58
00BB8:  CLRF   5A
00BBA:  MOVWF  59
00BBC:  RCALL  0ABA
00BBE:  MOVFF  57,FEA
00BC2:  MOVFF  56,FE9
00BC6:  MOVFF  01,FEF
....................       DEV_INFO[i].minute_on = read_ext_eeprom(0x0A+4*i+1); 
00BCA:  MOVF   53,W
00BCC:  MULLW  04
00BCE:  MOVF   FF3,W
00BD0:  CLRF   55
00BD2:  MOVWF  54
00BD4:  MOVLW  01
00BD6:  ADDWF  54,W
00BD8:  MOVWF  01
00BDA:  MOVLW  00
00BDC:  ADDWFC 55,W
00BDE:  MOVWF  03
00BE0:  MOVF   01,W
00BE2:  ADDLW  2F
00BE4:  MOVWF  01
00BE6:  MOVLW  00
00BE8:  ADDWFC 03,F
00BEA:  MOVFF  01,54
00BEE:  MOVFF  03,55
00BF2:  MOVF   53,W
00BF4:  MULLW  04
00BF6:  MOVF   FF3,W
00BF8:  ADDLW  0A
00BFA:  ADDLW  01
00BFC:  MOVWF  56
00BFE:  CLRF   5A
00C00:  MOVWF  59
00C02:  RCALL  0ABA
00C04:  MOVFF  55,FEA
00C08:  MOVFF  54,FE9
00C0C:  MOVFF  01,FEF
....................       DEV_INFO[i].time_on   = read_ext_eeprom(0x0A+4*i+2); 
00C10:  MOVF   53,W
00C12:  MULLW  04
00C14:  MOVF   FF3,W
00C16:  CLRF   55
00C18:  MOVWF  54
00C1A:  MOVLW  02
00C1C:  ADDWF  54,W
00C1E:  MOVWF  01
00C20:  MOVLW  00
00C22:  ADDWFC 55,W
00C24:  MOVWF  03
00C26:  MOVF   01,W
00C28:  ADDLW  2F
00C2A:  MOVWF  01
00C2C:  MOVLW  00
00C2E:  ADDWFC 03,F
00C30:  MOVFF  01,54
00C34:  MOVFF  03,55
00C38:  MOVF   53,W
00C3A:  MULLW  04
00C3C:  MOVF   FF3,W
00C3E:  ADDLW  0A
00C40:  ADDLW  02
00C42:  MOVWF  56
00C44:  CLRF   5A
00C46:  MOVWF  59
00C48:  RCALL  0ABA
00C4A:  MOVFF  55,FEA
00C4E:  MOVFF  54,FE9
00C52:  MOVFF  01,FEF
....................       DEV_INFO[i].state_on  = read_ext_eeprom(0x0A+4*i+3); 
00C56:  MOVF   53,W
00C58:  MULLW  04
00C5A:  MOVF   FF3,W
00C5C:  CLRF   55
00C5E:  MOVWF  54
00C60:  MOVLW  03
00C62:  ADDWF  54,W
00C64:  MOVWF  01
00C66:  MOVLW  00
00C68:  ADDWFC 55,W
00C6A:  MOVWF  03
00C6C:  MOVF   01,W
00C6E:  ADDLW  2F
00C70:  MOVWF  01
00C72:  MOVLW  00
00C74:  ADDWFC 03,F
00C76:  MOVFF  01,54
00C7A:  MOVFF  03,55
00C7E:  MOVF   53,W
00C80:  MULLW  04
00C82:  MOVF   FF3,W
00C84:  ADDLW  0A
00C86:  ADDLW  03
00C88:  MOVWF  56
00C8A:  CLRF   5A
00C8C:  MOVWF  59
00C8E:  RCALL  0ABA
00C90:  MOVFF  55,FEA
00C94:  MOVFF  54,FE9
00C98:  MOVFF  01,FEF
....................    } 
00C9C:  INCF   53,F
00C9E:  BRA    0B8A
....................    // load du lieu temp_max 
....................    temp_max = read_ext_eeprom(0x07); 
00CA0:  CLRF   5A
00CA2:  MOVLW  07
00CA4:  MOVWF  59
00CA6:  RCALL  0ABA
00CA8:  MOVFF  01,23
....................    huff_max = read_ext_eeprom(0x08); 
00CAC:  CLRF   5A
00CAE:  MOVLW  08
00CB0:  MOVWF  59
00CB2:  RCALL  0ABA
00CB4:  MOVFF  01,24
....................    mode_run = read_ext_eeprom(0x09); 
00CB8:  CLRF   5A
00CBA:  MOVLW  09
00CBC:  MOVWF  59
00CBE:  RCALL  0ABA
00CC0:  MOVFF  01,2C
.................... } 
00CC4:  GOTO   2622 (RETURN)
.................... // ham chay khi dang o mode 2 
.................... void run_mode2() 
.................... { 
....................    unsigned char count; 
....................    for(count=1;count<4;count++) 
*
00F3E:  MOVLW  01
00F40:  MOVWF  53
00F42:  MOVF   53,W
00F44:  SUBLW  03
00F46:  BTFSS  FD8.0
00F48:  BRA    1082
....................    { 
....................       if(maybom_on==0) 
00F4A:  MOVF   2A,F
00F4C:  BNZ   100A
....................       { 
....................          sum_on_max=DEV_INFO[count].hour_on*60+DEV_INFO[count].minute_on+DEV_INFO[count].time_on; 
00F4E:  MOVF   53,W
00F50:  MULLW  04
00F52:  MOVF   FF3,W
00F54:  CLRF   55
00F56:  MOVWF  54
00F58:  MOVLW  2F
00F5A:  ADDWF  54,W
00F5C:  MOVWF  FE9
00F5E:  MOVLW  00
00F60:  ADDWFC 55,W
00F62:  MOVWF  FEA
00F64:  MOVF   FEF,W
00F66:  MULLW  3C
00F68:  MOVFF  FF3,56
00F6C:  MOVF   53,W
00F6E:  MULLW  04
00F70:  MOVF   FF3,W
00F72:  CLRF   58
00F74:  MOVWF  57
00F76:  MOVLW  01
00F78:  ADDWF  57,W
00F7A:  MOVWF  01
00F7C:  MOVLW  00
00F7E:  ADDWFC 58,W
00F80:  MOVWF  03
00F82:  MOVF   01,W
00F84:  ADDLW  2F
00F86:  MOVWF  FE9
00F88:  MOVLW  00
00F8A:  ADDWFC 03,W
00F8C:  MOVWF  FEA
00F8E:  MOVF   FEF,W
00F90:  ADDWF  56,F
00F92:  MOVF   53,W
00F94:  MULLW  04
00F96:  MOVF   FF3,W
00F98:  CLRF   58
00F9A:  MOVWF  57
00F9C:  MOVLW  02
00F9E:  ADDWF  57,W
00FA0:  MOVWF  01
00FA2:  MOVLW  00
00FA4:  ADDWFC 58,W
00FA6:  MOVWF  03
00FA8:  MOVF   01,W
00FAA:  ADDLW  2F
00FAC:  MOVWF  FE9
00FAE:  MOVLW  00
00FB0:  ADDWFC 03,W
00FB2:  MOVWF  FEA
00FB4:  MOVF   FEF,W
00FB6:  ADDWF  56,W
00FB8:  MOVWF  45
00FBA:  CLRF   46
....................          sum_on_min=DEV_INFO[count].hour_on*60+DEV_INFO[count].minute_on-1; 
00FBC:  MOVF   53,W
00FBE:  MULLW  04
00FC0:  MOVF   FF3,W
00FC2:  CLRF   55
00FC4:  MOVWF  54
00FC6:  MOVLW  2F
00FC8:  ADDWF  54,W
00FCA:  MOVWF  FE9
00FCC:  MOVLW  00
00FCE:  ADDWFC 55,W
00FD0:  MOVWF  FEA
00FD2:  MOVF   FEF,W
00FD4:  MULLW  3C
00FD6:  MOVFF  FF3,56
00FDA:  MOVF   53,W
00FDC:  MULLW  04
00FDE:  MOVF   FF3,W
00FE0:  CLRF   58
00FE2:  MOVWF  57
00FE4:  MOVLW  01
00FE6:  ADDWF  57,W
00FE8:  MOVWF  01
00FEA:  MOVLW  00
00FEC:  ADDWFC 58,W
00FEE:  MOVWF  03
00FF0:  MOVF   01,W
00FF2:  ADDLW  2F
00FF4:  MOVWF  FE9
00FF6:  MOVLW  00
00FF8:  ADDWFC 03,W
00FFA:  MOVWF  FEA
00FFC:  MOVF   FEF,W
00FFE:  ADDWF  56,W
01000:  ADDLW  FF
01002:  MOVWF  43
01004:  CLRF   44
....................          count_in=count; 
01006:  MOVFF  53,2B
....................       } 
....................       sum_on=  hour*60+minute; 
0100A:  MOVF   1E,W
0100C:  MULLW  3C
0100E:  MOVF   FF3,W
01010:  ADDWF  1D,W
01012:  MOVWF  47
01014:  CLRF   48
....................       if(sum_on<sum_on_max&&sum_on>sum_on_min&&DEV_INFO[count_in].state_on==1) 
01016:  MOVF   48,W
01018:  SUBWF  46,W
0101A:  BNC   1078
0101C:  BNZ   1024
0101E:  MOVF   45,W
01020:  SUBWF  47,W
01022:  BC    1078
01024:  MOVF   44,W
01026:  SUBWF  48,W
01028:  BNC   1078
0102A:  BNZ   1032
0102C:  MOVF   47,W
0102E:  SUBWF  43,W
01030:  BC    1078
01032:  MOVF   2B,W
01034:  MULLW  04
01036:  MOVF   FF3,W
01038:  CLRF   55
0103A:  MOVWF  54
0103C:  MOVLW  03
0103E:  ADDWF  54,W
01040:  MOVWF  01
01042:  MOVLW  00
01044:  ADDWFC 55,W
01046:  MOVWF  03
01048:  MOVF   01,W
0104A:  ADDLW  2F
0104C:  MOVWF  FE9
0104E:  MOVLW  00
01050:  ADDWFC 03,W
01052:  MOVWF  FEA
01054:  DECFSZ FEF,W
01056:  BRA    1078
....................       {          
....................          on_all_van(); 
01058:  CALL   0590
....................          delay_ms(500); 
0105C:  MOVLW  02
0105E:  MOVWF  54
01060:  MOVLW  FA
01062:  MOVWF  5C
01064:  CALL   0860
01068:  DECFSZ 54,F
0106A:  BRA    1060
....................          if(maybom_on==0) 
0106C:  MOVF   2A,F
0106E:  BNZ   1072
....................             lcd_init(); 
01070:  RCALL  0960
....................          maybom_on=1; 
01072:  MOVLW  01
01074:  MOVWF  2A
....................       } 
....................       else 
01076:  BRA    107E
....................       { 
....................  
....................          off_all_van(); 
01078:  CALL   059E
....................          maybom_on=0; 
0107C:  CLRF   2A
....................       } 
....................    } 
0107E:  INCF   53,F
01080:  BRA    0F42
.................... } 
01082:  GOTO   253A (RETURN)
....................  
.................... // ham setup cac mode hoat dong cho mach 
.................... void set_mode() 
.................... { 
....................     // gia tri gio da duoc doc ra gio hien thi len lcd 
....................    if(state_settime)// dung de hien thi 1 lan duy nhat 
*
017F8:  MOVF   27,F
017FA:  BZ    1862
....................    { 
....................         lcd_gotoxy(1,2); 
017FC:  MOVLW  01
017FE:  MOVWF  5C
01800:  MOVLW  02
01802:  MOVWF  5D
01804:  CALL   0CC8
....................         printf(lcd_putc,"SETUP MODE :        "); 
01808:  MOVLW  7A
0180A:  MOVWF  FF6
0180C:  MOVLW  02
0180E:  MOVWF  FF7
01810:  CALL   0D54
....................         lcd_gotoxy(1,3); 
01814:  MOVLW  01
01816:  MOVWF  5C
01818:  MOVLW  03
0181A:  MOVWF  5D
0181C:  CALL   0CC8
....................         printf(lcd_putc,"                    ");   
01820:  MOVLW  90
01822:  MOVWF  FF6
01824:  MOVLW  02
01826:  MOVWF  FF7
01828:  CALL   0D54
....................         lcd_gotoxy(1,4); 
0182C:  MOVLW  01
0182E:  MOVWF  5C
01830:  MOVLW  04
01832:  MOVWF  5D
01834:  CALL   0CC8
....................         printf(lcd_putc,"                    ");  
01838:  MOVLW  A6
0183A:  MOVWF  FF6
0183C:  MOVLW  02
0183E:  MOVWF  FF7
01840:  CALL   0D54
....................         mode_run_flag=mode_run; 
01844:  MOVFF  2C,2E
....................         lcd_gotoxy(12,2); 
01848:  MOVLW  0C
0184A:  MOVWF  5C
0184C:  MOVLW  02
0184E:  MOVWF  5D
01850:  CALL   0CC8
....................         printf(lcd_putc,"%u",mode_run_flag); 
01854:  MOVFF  2E,53
01858:  MOVLW  1B
0185A:  MOVWF  54
0185C:  RCALL  16BA
....................         // duoc set lai bang 1 khi chuuyen che do setup 
....................         state_settime=0; 
0185E:  CLRF   27
....................         set_flag_mode2=0; 
01860:  CLRF   28
....................    }   
....................     
....................    // khi nut menu duoc bam chuyen cac che do hoat dong trong mode 2 
....................    if(!SET_BTN) 
01862:  BTFSC  F81.0
01864:  BRA    18A0
....................    { 
....................       // bat loa len tao xung o chan loa 
....................       Speaker = 1; 
01866:  BSF    F8B.0
....................       delay_ms(150); 
01868:  MOVLW  96
0186A:  MOVWF  5C
0186C:  CALL   0860
....................       Speaker = 0; 
01870:  BCF    F8B.0
....................       delay_ms(150);  
01872:  MOVLW  96
01874:  MOVWF  5C
01876:  CALL   0860
....................       // cho den khi nut duoc nha ra 
....................       while(!SET_BTN); 
0187A:  BTFSS  F81.0
0187C:  BRA    187A
....................       //tang bien chuyen che do 
....................       set_flag_mode2++; 
0187E:  INCF   28,F
....................       if(set_flag_mode2==3)         
01880:  MOVF   28,W
01882:  SUBLW  03
01884:  BNZ   18A0
....................          { 
....................             set_flag_mode2=0; 
01886:  CLRF   28
....................             // xoa dong stored di 
....................             lcd_gotoxy(1,3); 
01888:  MOVLW  01
0188A:  MOVWF  5C
0188C:  MOVLW  03
0188E:  MOVWF  5D
01890:  CALL   0CC8
....................             printf(lcd_putc,"       "); 
01894:  MOVLW  BC
01896:  MOVWF  FF6
01898:  MOVLW  02
0189A:  MOVWF  FF7
0189C:  CALL   0D54
....................              
....................          } 
....................    }  
....................    // su ly cac trang thai co. setup thoi gian thuc   
....................    switch(set_flag_mode2) 
....................    { 
018A0:  MOVF   28,W
018A2:  BZ    18AA
018A4:  XORLW  01
018A6:  BZ    192C
018A8:  BRA    19AE
....................       // de do trang thai nhap nhay tai vi tri cua . 
....................       // neu an nut tang giam thi se thay doi gia tri giay 
....................       case 0:   
....................       { 
....................          lcd_gotoxy(12,2); 
018AA:  MOVLW  0C
018AC:  MOVWF  5C
018AE:  MOVLW  02
018B0:  MOVWF  5D
018B2:  CALL   0CC8
....................          lcd_putc(' '); 
018B6:  MOVLW  20
018B8:  MOVWF  5B
018BA:  CALL   0D0A
....................          delay_ms(100); 
018BE:  MOVLW  64
018C0:  MOVWF  5C
018C2:  CALL   0860
....................          lcd_gotoxy(12,2); 
018C6:  MOVLW  0C
018C8:  MOVWF  5C
018CA:  MOVLW  02
018CC:  MOVWF  5D
018CE:  CALL   0CC8
....................          printf(lcd_putc,"%u",mode_run_flag); 
018D2:  MOVFF  2E,53
018D6:  MOVLW  1B
018D8:  MOVWF  54
018DA:  RCALL  16BA
....................          delay_ms(100); 
018DC:  MOVLW  64
018DE:  MOVWF  5C
018E0:  CALL   0860
....................          if(!UP_BTN)          //neu bam nut add-------- 
018E4:  BTFSC  F81.2
018E6:  BRA    1908
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
018E8:  BSF    F8B.0
....................             delay_ms(150); 
018EA:  MOVLW  96
018EC:  MOVWF  5C
018EE:  CALL   0860
....................             Speaker = 0; 
018F2:  BCF    F8B.0
....................             delay_ms(150);  
018F4:  MOVLW  96
018F6:  MOVWF  5C
018F8:  CALL   0860
....................             mode_run_flag++; 
018FC:  INCF   2E,F
....................             if(mode_run_flag==4)        mode_run_flag=1;          
018FE:  MOVF   2E,W
01900:  SUBLW  04
01902:  BNZ   1908
01904:  MOVLW  01
01906:  MOVWF  2E
....................          }  
....................          if(!DOWN_BTN)          //neu bam nut sub-------- 
01908:  BTFSC  F81.1
0190A:  BRA    192A
....................          { 
....................             //cho toi khi tha nut bam 
....................             Speaker = 1; 
0190C:  BSF    F8B.0
....................             delay_ms(150); 
0190E:  MOVLW  96
01910:  MOVWF  5C
01912:  CALL   0860
....................             Speaker = 0; 
01916:  BCF    F8B.0
....................             delay_ms(150);  
01918:  MOVLW  96
0191A:  MOVWF  5C
0191C:  CALL   0860
....................             mode_run_flag--; 
01920:  DECF   2E,F
....................             if(mode_run_flag==0)        mode_run_flag=3;              
01922:  MOVF   2E,F
01924:  BNZ   192A
01926:  MOVLW  03
01928:  MOVWF  2E
....................          }  
....................       }  
....................       break; 
0192A:  BRA    19B0
....................       // chon che do la disable hay enable gio bat tat may bom 
....................       case 1:              
....................       { 
....................          lcd_gotoxy(1,3);  
0192C:  MOVLW  01
0192E:  MOVWF  5C
01930:  MOVLW  03
01932:  MOVWF  5D
01934:  CALL   0CC8
....................          printf(lcd_putc,">Stored"); 
01938:  MOVLW  C4
0193A:  MOVWF  FF6
0193C:  MOVLW  02
0193E:  MOVWF  FF7
01940:  CALL   0D54
....................          mode_run=mode_run_flag; 
01944:  MOVFF  2E,2C
....................          lcd_gotoxy(1,1); 
01948:  MOVLW  01
0194A:  MOVWF  5C
0194C:  MOVWF  5D
0194E:  CALL   0CC8
....................          printf(lcd_putc,"  CHE DO : MODE %u   ",mode_run);  
01952:  MOVLW  CC
01954:  MOVWF  FF6
01956:  MOVLW  02
01958:  MOVWF  FF7
0195A:  MOVLW  10
0195C:  MOVWF  53
0195E:  BRA    1742
01960:  MOVFF  2C,53
01964:  MOVLW  1B
01966:  MOVWF  54
01968:  RCALL  16BA
0196A:  MOVLW  20
0196C:  MOVWF  5B
0196E:  CALL   0D0A
01972:  MOVLW  20
01974:  MOVWF  5B
01976:  CALL   0D0A
0197A:  MOVLW  20
0197C:  MOVWF  5B
0197E:  CALL   0D0A
....................          //thuc hien qua trinh ngat uart khi chuyen mode khong con o mode 2 
....................          if(mode_run==2) 
01982:  MOVF   2C,W
01984:  SUBLW  02
01986:  BNZ   198A
....................             disable_interrupts(INT_RDA); 
01988:  BCF    F9D.5
....................          if(mode_run!=2) 
0198A:  MOVF   2C,W
0198C:  SUBLW  02
0198E:  BZ    1992
....................             enable_interrupts(INT_RDA);    
01990:  BSF    F9D.5
....................          //neu nhu chuyen mode khi mode 2 dang hoat dong 
....................          // mode 2 dang trong thoi gian bat bom-> tat bom 
....................          if(maybom_on==1) 
01992:  DECFSZ 2A,W
01994:  BRA    1998
....................             maybom_on=0; 
01996:  CLRF   2A
....................          //luu vao eeprom 
....................          write_ext_eeprom(0x09,mode_run); 
01998:  CLRF   58
0199A:  MOVLW  09
0199C:  MOVWF  57
0199E:  MOVFF  2C,59
019A2:  RCALL  1764
....................          off_all_van(); 
019A4:  CALL   059E
....................          set_flag_mode2=2; 
019A8:  MOVLW  02
019AA:  MOVWF  28
....................      } 
....................       break;  
019AC:  BRA    19B0
....................       default: 
....................       break; 
019AE:  BRA    19B0
....................    } 
.................... } 
019B0:  GOTO   2552 (RETURN)
....................  
....................  
.................... #include "seg_dislay.c" 
.................... // chuong trinh chay hien thi thoi gian len led 7 thang 
.................... // ham duoc goi khi co su thay doi ve phut hoac gio 
.................... // chi hien thi gio va phut len led 
.................... // khai bao cac ham include vao chuong trinh 
.................... //*********************************************************************// 
.................... // khai bao cac chan dieu khien 74HC595 
.................... #bit LAT_595 =  LATA.1 
.................... #bit SCK_595 =  LATA.2 
.................... #bit DATA_595=  LATA.3 
.................... #bit LAT_595_IO =     TRISA.1 
.................... #bit SCK_595_IO =     TRISA.2 
.................... #bit DATA_595_IO=     TRISA.3 
.................... #bit led=LATA.0 
.................... #bit led_io=TRISA.0 
.................... //  khoi tao mang du lieu cho hien thi led 7 thanh 
.................... unsigned char seg_data[10]={0x80,0xf3,0x49,0x60,0x32,0x24,0x04,0xf0,0x00,0x20 }; 
....................  
.................... // cac ham trong file 
.................... void Init_595(); 
.................... void dislay_seg(unsigned char data1, unsigned char data2); 
.................... void scan_595(unsigned char data); 
....................  
.................... //funtion : to setup io pin for 595 
.................... void Init_595() 
.................... { 
....................     LAT_595_IO = 0; 
*
00A66:  BCF    F92.1
....................     SCK_595_IO = 0; 
00A68:  BCF    F92.2
....................     DATA_595_IO = 0;    
00A6A:  BCF    F92.3
.................... } 
00A6C:  GOTO   261C (RETURN)
....................  
.................... // ham dua du lieu 1 byte ra tung bit tren 1 pin vi dieu khien 
.................... void scan_595(unsigned char data) 
.................... { 
....................     unsigned char i,temp; 
....................     for(i=0;i<8;i++) 
*
004A6:  CLRF   x69
004A8:  MOVF   x69,W
004AA:  SUBLW  07
004AC:  BNC   04CE
....................     { 
....................         temp=data;             //gan bien 
004AE:  MOVFF  68,6A
....................         temp=temp&0x80;     //lay ra bit dau tien (bit 7) 
004B2:  MOVLW  80
004B4:  ANDWF  x6A,F
....................         if(temp==0x80)      //so sanh bit 
004B6:  MOVF   x6A,W
004B8:  SUBLW  80
004BA:  BNZ   04C0
....................             DATA_595=1;         //bang 1 thi xuat vao chip =1 
004BC:  BSF    F89.3
....................         else 
004BE:  BRA    04C2
....................             DATA_595=0;         //nguoc lai bang 0 
004C0:  BCF    F89.3
....................         data*=2;               //dich bit lay bit trong so thap 
004C2:  BCF    FD8.0
004C4:  RLCF   x68,F
....................         SCK_595=0;          //tao xung tren chan 11 
004C6:  BCF    F89.2
....................         SCK_595=1;          //1 xung dua vo 1 bt 
004C8:  BSF    F89.2
....................     } 
004CA:  INCF   x69,F
004CC:  BRA    04A8
.................... } 
004CE:  RETURN 0
....................  
.................... // ham hien thi ra led 7 thanh   
.................... // input data1 : hour 
.................... // input data2 : minute 
.................... void dislay_seg(unsigned char data1, unsigned char data2) 
.................... { 
....................     // hien thi du lieu data1 len led 7 thanh 
....................     //scan_595(seg_data[data1/10]);     // day du lieu byte thap cua data1 
....................     scan_595(seg_data[data2/10]);     // day du lieu byte thap cua data2 
004D0:  MOVFF  66,67
004D4:  MOVLW  0A
004D6:  MOVWF  x68
004D8:  RCALL  047E
004DA:  CLRF   03
004DC:  MOVF   01,W
004DE:  ADDLW  49
004E0:  MOVWF  FE9
004E2:  MOVLW  00
004E4:  ADDWFC 03,W
004E6:  MOVWF  FEA
004E8:  MOVFF  FEF,67
004EC:  MOVFF  67,68
004F0:  RCALL  04A6
....................     scan_595(seg_data[data2%10]);     // day du lieu byte cao cua data2 
004F2:  MOVFF  66,67
004F6:  MOVLW  0A
004F8:  MOVWF  x68
004FA:  RCALL  047E
004FC:  CLRF   03
004FE:  MOVF   00,W
00500:  ADDLW  49
00502:  MOVWF  FE9
00504:  MOVLW  00
00506:  ADDWFC 03,W
00508:  MOVWF  FEA
0050A:  MOVFF  FEF,67
0050E:  MOVFF  67,68
00512:  RCALL  04A6
....................      
....................     scan_595(seg_data[data1/10]);     // day du lieu byte thap cua data1 
00514:  MOVFF  65,67
00518:  MOVLW  0A
0051A:  MOVWF  x68
0051C:  RCALL  047E
0051E:  CLRF   03
00520:  MOVF   01,W
00522:  ADDLW  49
00524:  MOVWF  FE9
00526:  MOVLW  00
00528:  ADDWFC 03,W
0052A:  MOVWF  FEA
0052C:  MOVFF  FEF,67
00530:  MOVFF  67,68
00534:  RCALL  04A6
....................     scan_595(seg_data[data1%10]);     // day du lieu byte cao cua data1 
00536:  MOVFF  65,67
0053A:  MOVLW  0A
0053C:  MOVWF  x68
0053E:  RCALL  047E
00540:  CLRF   03
00542:  MOVF   00,W
00544:  ADDLW  49
00546:  MOVWF  FE9
00548:  MOVLW  00
0054A:  ADDWFC 03,W
0054C:  MOVWF  FEA
0054E:  MOVFF  FEF,67
00552:  MOVFF  67,68
00556:  RCALL  04A6
....................      
....................     LAT_595=1;              // tao 1 xung tai pin lat cua 74hc595 
00558:  BSF    F89.1
....................     LAT_595=0;              // day du lieu tai tat ca cac pin ra 
0055A:  BCF    F89.1
.................... } 
0055C:  GOTO   0576 (RETURN)
....................  
.................... void switch_menu(); 
.................... // chuong trinh ngat timer 1 
.................... #int_TIMER1 
.................... void  TIMER1_isr(void)  
.................... { 
....................    // gui ki tu 'r' di de lay gia tri nhiet do va do am 
....................    //uart_putchar('r'); 
.................... } 
.................... // chuong trinh ngat timer 0 
*
002E2:  BCF    F9E.0
002E4:  GOTO   0078
.................... #int_TIMER0 
.................... void  TIMER0_isr(void)  
.................... { 
....................    if(menu_system==0 || menu_system==3) 
*
00560:  MOVF   2D,F
00562:  BZ    056A
00564:  MOVF   2D,W
00566:  SUBLW  03
00568:  BNZ   056C
....................       update_time(); 
0056A:  RCALL  03F2
....................    // hien thi led led 7 thanh 
....................    dislay_seg(hour,minute); 
0056C:  MOVFF  1E,65
00570:  MOVFF  1D,66
00574:  BRA    04D0
....................    if(!led) led=1; 
00576:  BTFSC  F89.0
00578:  BRA    057E
0057A:  BSF    F89.0
....................    else     led=0; 
0057C:  BRA    0580
0057E:  BCF    F89.0
.................... } 
.................... // chuong trinh ngat uart 
00580:  BCF    FF2.2
00582:  GOTO   0078
.................... #INT_RDA 
.................... void Receive_isr()  
.................... { 
....................    if(mode_run==1) 
*
007C2:  DECFSZ 2C,W
007C4:  BRA    07C8
....................       dieukhien_van(); 
007C6:  BRA    05AC
....................    //if(mode_run==2){} 
....................    if(mode_run==3) 
007C8:  MOVF   2C,W
007CA:  SUBLW  03
007CC:  BNZ   07F2
....................    { 
....................       unsigned char rx_buff[3],rx_count; 
....................       rx_buff[rx_count++] = RCREG; 
007CE:  MOVF   x68,W
007D0:  INCF   x68,F
007D2:  CLRF   03
007D4:  ADDLW  65
007D6:  MOVWF  FE9
007D8:  MOVLW  00
007DA:  ADDWFC 03,W
007DC:  MOVWF  FEA
007DE:  MOVFF  FAE,FEF
....................       if(rx_count>1) 
007E2:  MOVF   x68,W
007E4:  SUBLW  01
007E6:  BC    07F2
....................       { 
....................          temp=rx_buff[0]; 
007E8:  MOVFF  65,25
....................          huff=rx_buff[1]; 
007EC:  MOVFF  66,26
....................          rx_count=0; 
007F0:  CLRF   x68
....................       } 
....................    } 
.................... } 
....................  
007F2:  BCF    F9E.5
007F4:  GOTO   0078
.................... void main() 
.................... { 
*
0256C:  CLRF   FF8
0256E:  BCF    FD0.7
02570:  BSF    07.7
02572:  CLRF   FEA
02574:  CLRF   FE9
02576:  BCF    FB8.3
02578:  MOVLW  0C
0257A:  MOVWF  FAF
0257C:  MOVLW  A6
0257E:  MOVWF  FAC
02580:  MOVLW  90
02582:  MOVWF  FAB
02584:  MOVLW  01
02586:  MOVWF  1F
02588:  MOVWF  27
0258A:  CLRF   2A
0258C:  CLRF   2B
0258E:  CLRF   2C
02590:  MOVWF  2E
02592:  MOVLW  00
02594:  MOVWF  F7E
02596:  BCF    FC1.4
02598:  BCF    FC1.5
0259A:  MOVF   F7F,W
0259C:  ANDLW  E0
0259E:  MOVWF  F7F
025A0:  BCF    F79.5
025A2:  BCF    F79.4
025A4:  CLRF   F7A
025A6:  CLRF   F7B
025A8:  MOVLW  80
025AA:  MOVWF  49
025AC:  MOVLW  F3
025AE:  MOVWF  4A
025B0:  MOVLW  49
025B2:  MOVWF  4B
025B4:  MOVLW  60
025B6:  MOVWF  4C
025B8:  MOVLW  32
025BA:  MOVWF  4D
025BC:  MOVLW  24
025BE:  MOVWF  4E
025C0:  MOVLW  04
025C2:  MOVWF  4F
025C4:  MOVLW  F0
025C6:  MOVWF  50
025C8:  CLRF   51
025CA:  MOVLW  20
025CC:  MOVWF  52
....................    //T1CONL=0x30; 
....................    //T1CONH=0xA0; 
....................     
....................    setup_timer_0 (RTCC_INTERNAL|RTCC_DIV_16); 
025CE:  MOVLW  83
025D0:  MOVWF  FD5
....................    set_timer0(0); 
025D2:  CLRF   FD7
025D4:  CLRF   FD6
....................    led_io=0; 
025D6:  BCF    F92.0
....................    enable_interrupts(INT_TIMER0); 
025D8:  BSF    FF2.5
....................    enable_interrupts(INT_RDA); 
025DA:  BSF    F9D.5
....................    enable_interrupts(GLOBAL); 
025DC:  MOVLW  C0
025DE:  IORWF  FF2,F
....................    setup_io_dieukhien(); 
025E0:  GOTO   0850
....................    Speaker_io=0; 
025E4:  BCF    F94.0
....................    setup_comparator(NC_NC_NC_NC);// This device COMP currently not supported by the PICWizard 
025E6:  BCF    F79.5
025E8:  BCF    F79.4
025EA:  MOVLW  04
025EC:  MOVWF  F7A
025EE:  MOVWF  F7B
....................    lcd_init(); 
025F0:  CALL   0960
....................    delay_ms(10); 
025F4:  MOVLW  0A
025F6:  MOVWF  5C
025F8:  CALL   0860
....................    init_DS1307(); 
025FC:  GOTO   09B2
....................    delay_ms(10); 
02600:  MOVLW  0A
02602:  MOVWF  5C
02604:  CALL   0860
....................    init_ext_eeprom(); 
02608:  GOTO   0A02
....................    delay_ms(10); 
0260C:  MOVLW  0A
0260E:  MOVWF  5C
02610:  CALL   0860
....................    LED_LCD_IO=0; 
02614:  BCF    F92.4
....................    LED_LCD=1; 
02616:  BSF    F89.4
....................    Init_595(); 
02618:  GOTO   0A66
....................    menu_system=0; 
0261C:  CLRF   2D
....................    load_eeprom(); 
0261E:  GOTO   0B86
....................    off_all_van(); 
02622:  CALL   059E
....................    while(true) 
....................    { 
....................       switch_menu(); 
02626:  BRA    2466
....................    } 
02628:  BRA    2626
.................... } 
....................  
.................... void switch_menu() 
.................... { 
0262A:  SLEEP 
....................    if(!MENU_BTN) 
*
02466:  BTFSC  F81.3
02468:  BRA    24A2
....................    { 
....................       // bat loa len tao xung o chan loa 
....................       Speaker = 1; 
0246A:  BSF    F8B.0
....................       delay_ms(150); 
0246C:  MOVLW  96
0246E:  MOVWF  5C
02470:  CALL   0860
....................       Speaker = 0; 
02474:  BCF    F8B.0
....................       delay_ms(150);  
02476:  MOVLW  96
02478:  MOVWF  5C
0247A:  CALL   0860
....................       state_settime=1; 
0247E:  MOVLW  01
02480:  MOVWF  27
....................       lcd_gotoxy(1,4); 
02482:  MOVWF  5C
02484:  MOVLW  04
02486:  MOVWF  5D
02488:  CALL   0CC8
....................       printf(lcd_putc,"                    "); 
0248C:  MOVLW  F8
0248E:  MOVWF  FF6
02490:  MOVLW  07
02492:  MOVWF  FF7
02494:  CALL   0D54
....................       menu_system++; 
02498:  INCF   2D,F
....................       if(menu_system==5)   menu_system=0; 
0249A:  MOVF   2D,W
0249C:  SUBLW  05
0249E:  BTFSC  FD8.2
024A0:  CLRF   2D
....................    } 
....................    switch(menu_system) 
....................    { 
024A2:  MOVF   2D,W
024A4:  BZ    24B8
024A6:  XORLW  01
024A8:  BZ    2542
024AA:  XORLW  03
024AC:  BZ    2548
024AE:  XORLW  01
024B0:  BZ    254E
024B2:  XORLW  07
024B4:  BZ    2554
024B6:  BRA    2566
....................       // chay chuong trinh chinh 
....................       case 0: 
....................       { 
....................          // chay chuong trinh chinh 
....................          if(mode_run ==1) 
024B8:  DECFSZ 2C,W
024BA:  BRA    24E2
....................          { 
....................             // hien thi cac gia tri len lcd 
....................             // hien thi che do mode len dong 1 
....................             lcd_gotoxy(1,1); 
024BC:  MOVLW  01
024BE:  MOVWF  5C
024C0:  MOVWF  5D
024C2:  CALL   0CC8
....................            // update_time(); 
....................             // hien thi led led 7 thanh 
....................              
....................             printf(lcd_putc,"  CHE DO : MODE 1   "); 
024C6:  MOVLW  0E
024C8:  MOVWF  FF6
024CA:  MOVLW  08
024CC:  MOVWF  FF7
024CE:  CALL   0D54
....................             // hien thi thoi gian + date 
....................             put_time_info(); 
024D2:  CALL   0DC8
....................             put_date_info(); 
024D6:  CALL   0E28
....................             delay_ms(100); 
024DA:  MOVLW  64
024DC:  MOVWF  5C
024DE:  CALL   0860
....................             // chay chuong trinh tu uart dieu khien may bom 
....................              
....................          } 
....................          if(mode_run==2) 
024E2:  MOVF   2C,W
024E4:  SUBLW  02
024E6:  BNZ   253A
024E8:  CLRF   19
024EA:  BTFSC  FF2.7
024EC:  BSF    19.7
024EE:  BCF    FF2.7
....................          { 
....................             update_time(); 
024F0:  CALL   03F2
024F4:  BTFSC  19.7
024F6:  BSF    FF2.7
....................             lcd_gotoxy(1,1); 
024F8:  MOVLW  01
024FA:  MOVWF  5C
024FC:  MOVWF  5D
024FE:  CALL   0CC8
....................             printf(lcd_putc,"  CHE DO : MODE 2   "); 
02502:  MOVLW  24
02504:  MOVWF  FF6
02506:  MOVLW  08
02508:  MOVWF  FF7
0250A:  CALL   0D54
....................             // hien thi thoi gian + date 
....................             put_time_info(); 
0250E:  CALL   0DC8
....................             put_date_info(); 
02512:  CALL   0E28
....................             lcd_gotoxy(1,4); 
02516:  MOVLW  01
02518:  MOVWF  5C
0251A:  MOVLW  04
0251C:  MOVWF  5D
0251E:  CALL   0CC8
....................             printf(lcd_putc,"                    "); 
02522:  MOVLW  3A
02524:  MOVWF  FF6
02526:  MOVLW  08
02528:  MOVWF  FF7
0252A:  CALL   0D54
....................             delay_ms(100); 
0252E:  MOVLW  64
02530:  MOVWF  5C
02532:  CALL   0860
....................             run_mode2(); 
02536:  GOTO   0F3E
....................          } 
....................          if(mode_run==3) 
0253A:  MOVF   2C,W
0253C:  SUBLW  03
0253E:  BNZ   2540
....................          { 
....................             // hien thi gia tri nhiet do va do am lcd 
....................             //run_mode3(); 
....................          } 
....................       } 
....................       break; 
02540:  BRA    2568
....................       // chay chuong trinh setup time 
....................       case 1: 
....................       { 
....................          set_time(); 
02542:  GOTO   11A6
....................       } 
....................       break; 
02546:  BRA    2568
....................       // chay chuong trinh setup date 
....................       case 2: 
....................       { 
....................          set_date(); 
02548:  GOTO   1408
....................       } 
....................       break; 
0254C:  BRA    2568
....................       // chay chuong trinh setup time 
....................       case 3: 
....................       { 
....................          set_mode(); 
0254E:  GOTO   17F8
....................       } 
....................       break; 
02552:  BRA    2568
....................       // neu dang o mode 2 setup thoi gian on off 
....................       case 4: 
....................       { 
....................          // 
....................          if(mode_run==2) 
02554:  MOVF   2C,W
02556:  SUBLW  02
02558:  BNZ   255E
....................             set_time_on_off(); 
0255A:  GOTO   19B4
....................          //if(mode_run==3); 
....................             //set_temp_huff(); 
....................          if(mode_run==1) 
0255E:  DECFSZ 2C,W
02560:  BRA    2564
....................             menu_system=0;         
02562:  CLRF   2D
....................       } 
....................       break; 
02564:  BRA    2568
....................       // neu dang o mode 3 setup nhiet do on off 
....................       default: 
....................       break; 
02566:  BRA    2568
....................    } 
.................... } 
02568:  GOTO   2628 (RETURN)

Configuration Fuses:
   Word  1: C200   HS FCMEN IESO
   Word  2: 0E18   PUT NOBROWNOUT BORV20 NOWDT WDT128
   Word  3: 8F00   CCP2C1 PBADEN LPT1OSC HFOFST MCLR
   Word  4: 0081   STVREN NOLVP NOXINST NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: E00F   NOWRT NOWRTC NOWRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
